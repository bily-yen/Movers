"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8996],{31413:function(e,t,r){let i;r.d(t,{Hk:function(){return autocomplete},f8:function(){return E},B7:function(){return D},Xk:function(){return H},Cq:function(){return A},L7:function(){return ee},eu:function(){return namedSnippet},aS:function(){return $}});var n,o,l,s,a,c,d=r(34790),u=r(59119),p=r(14456),h=r(74374),f=r(68092),m=r(12720),x=r(13961),g=r(23939),y=r(25227),C=r(85623),w=r(83687),v=r(85893);let BarVertical=e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M3 13C3 11.8954 3.89543 11 5 11H9C10.1046 11 11 11.8954 11 13V25C11 26.1046 10.1046 27 9 27H5C3.89543 27 3 26.1046 3 25V13Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M12 16C12 14.8954 12.8954 14 14 14H18C19.1046 14 20 14.8954 20 16V25C20 26.1046 19.1046 27 18 27H14C12.8954 27 12 26.1046 12 25V16Z",fill:"currentColor"}),(0,v.jsx)("rect",{x:"21",y:"18",width:"8",height:"9",rx:"2",fill:"currentColor"}),(0,v.jsx)("path",{d:"M30 8C30 6.89543 30.8954 6 32 6H36C37.1046 6 38 6.89543 38 8V25C38 26.1046 37.1046 27 36 27H32C30.8954 27 30 26.1046 30 25V8Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M39 13C39 11.8954 39.8954 11 41 11H45C46.1046 11 47 11.8954 47 13V25C47 26.1046 46.1046 27 45 27H41C39.8954 27 39 26.1046 39 25V13Z",fill:"currentColor"})]}),NPM=e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 5H17V13H15V7H13V13H9V5Z M29 5H41V13H39V7H37V13H35V7H33V13H29V5Z M27 5H19V15H23V13H27V5ZM25 7H23V11H25V7Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M22 21.5858L25 24.5858L28 21.5858 M25 16L25 24",stroke:"currentColor",strokeWidth:"2"})]}),Top10Chart=e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M3 5C3 3.89543 3.89543 3 5 3H35C36.1046 3 37 3.89543 37 5V8C37 9.10457 36.1046 10 35 10H5C3.89543 10 3 9.10457 3 8V5Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M3 13C3 11.8954 3.89543 11 5 11H29C30.1046 11 31 11.8954 31 13V16C31 17.1046 30.1046 18 29 18H5C3.89543 18 3 17.1046 3 16V13Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M3 21C3 19.8954 3.89543 19 5 19H23C24.1046 19 25 19.8954 25 21V24C25 25.1046 24.1046 26 23 26H5C3.89543 26 3 25.1046 3 24V21Z",fill:"currentColor"})]}),Transform=e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"5 5 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M35.625 24.5C28.875 24.5 28.875 15.5 22.125 15.5",stroke:"currentColor",strokeWidth:"2"}),(0,v.jsx)("path",{d:"M37.875 15.5L34.5 18.875V12.125L37.875 15.5Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M37.875 24.5L34.5 27.875V21.125L37.875 24.5Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M35.625 15.5C28.875 15.5 28.875 24.5 22.125 24.5",stroke:"currentColor",strokeWidth:"2"})]});var b=r(4640);(n=s||(s={})).Data="data",n.Snippet="snippet",n.Reference="reference",n.Stdlib="stdlib",n.JavaScript="javascript",(o=a||(a={}))[o.JavaScriptLocal=99]="JavaScriptLocal",o[o.Reference=98]="Reference",o[o.Stdlib=97]="Stdlib",o[o.Data=96]="Data",o[o.Snippet=95]="Snippet",o[o.JavaScriptCell=94]="JavaScriptCell",o[o.JavaScript=93]="JavaScript",(l=c||(c={})).Global="global",l.Snippet="snippet",l.Cell="cell",l.Local="local",l.Stdlib="stdlib",l.File="file",l.Database="database",l.Secret="secret",l.Property="property",l.Dot="dot",l.Markdown="markdown",l.Mermaid="mermaid";let AutocompleteTask=class AutocompleteTask extends b.i{async process(e){var t;let r=await e({type:"autocomplete",variable:this._variable,paths:this._paths});return(t=Array.from(r,e=>({label:e,type:s.JavaScript,boost:a.JavaScript,detail:c.Property,origin:"worker"})),e=>{if(!t.length)return null;let{name:r,from:i}=(0,u.qz)(e.state).resolve(e.pos,-1);return{from:"PropertyName"===r?i:e.pos,options:t,span:/\w*$/}})(this._context)}constructor(e,t,r){super(),this._context=e,this._variable=t,this._paths=r}};var k=r(5146),j=r(13729),S=r(61091);function namedSnippet(e){return(t,r,i,n)=>{let o=t.state.field(C.rr);(0,d.DB)(e(e=>(0,S.Q)(e,o)))(t,r,i,n)}}let L=[["function ${name}(${params}) {\n	${}\n}","function"],["class ${Name} {\n	constructor(${params}) {\n		${}\n	}\n}","class"]].map(e=>{let[t,r]=e;return{apply:(0,d.DB)(t),label:safeLabel(r),type:s.JavaScript,boost:a.JavaScript,detail:c.Snippet,origin:"javascriptSnippets"}});function safeLabel(e){if(!/^[a-z0-9.`[\]_\- ]+$/i.test(e))throw Error("invalid label: ".concat(e));return e.replace(/ /g,"\xa0")}let M=[["md`${}`","md`` [Markdown]",recomplete],["htl.html`${}`","html``"],["htl.svg`${}`","svg``"],["tex`${}`","tex``"],["dot`${}`","dot`` [Graphviz]",recomplete],["mermaid`${}`","mermaid``",recomplete]].map(e=>{let[t,r,i=e=>e]=e;return{apply:i((0,d.DB)(t)),label:safeLabel(r),type:s.Stdlib,boost:a.Stdlib,detail:c.Stdlib,origin:"stdlib"}}),V=[['DatabaseClient("${}")',"DatabaseClient",recomplete],['FileAttachment("${}")',"FileAttachment",recomplete],['Secret("${}")',"Secret",recomplete],['(await NotificationClient("${}")).send(${})',"NotificationClient"],["Generators.observe(notify => {\n	${}\n})","Generators.observe"],["Promises.delay(${duration})","Promises.delay"],["Promises.tick(${duration})","Promises.tick"],["invalidation"],["visibility()","visibility"],["width"],["now"],["d3","D3"],["_","_ [Lodash]"],["vl","vl [Vega-Lite]"],["Inputs"],["Plot"],["aq","aq [Arquero]"],["Arrow","Apache Arrow"],["L","L [Leaflet]"],["htl","htl [Hypertext Literal]"],["DuckDBClient.of({${name}: ${data}})","DuckDBClient"],["SQLiteDatabaseClient.open(${source})","SQLiteDatabaseClient"],["topojson","TopoJSON"],["aapl"],["alphabet"],["cars"],["citywages"],["diamonds"],["flare"],["industries"],["miserables"],["olympians"],["penguins"],["weather"]].map(e=>{let[t,r=t,i=e=>e]=e;return{apply:i((0,d.DB)(t)),label:safeLabel(r),type:s.Stdlib,boost:a.Stdlib,detail:c.Stdlib,origin:"stdlib"}});function recomplete(e){return(t,r,i,n)=>{e(t,r,i,n),t instanceof p.tk&&(0,d.WA)(t)}}let _=[["let ${name};","let"],["const ${name} = ${value};","const"],["for (let ${index} = 0; ${index} < ${length}; ++${index}) {\n	${}\n}","for loop"],["for (const ${value} of ${values}) {\n	${}\n}","for of loop"],["try {\n	${}\n} catch (${error}) {\n	${}\n}","try catch"]].map(e=>{let[t,r]=e;return{apply:(0,d.DB)(t),label:safeLabel(r),type:s.JavaScript,boost:a.JavaScript,detail:c.Snippet,origin:"blockSnippets"}}),H=[{text:'import {${cell}} from "@${user}/${notebook}"',label:"Import notebook",description:"Reuse any code on Observable",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M22 21.5858L25 24.5858L28 21.5858",stroke:"currentColor",strokeWidth:"2"}),(0,v.jsx)("path",{d:"M25 16L25 24",stroke:"currentColor",strokeWidth:"2"}),(0,v.jsx)("path",{d:"M19 7C19 5.89543 19.8954 5 21 5H27L31 9V17C31 18.1046 30.1046 19 29 19H27V17H29V10H26V7H21V17H23V19H21C19.8954 19 19 18.1046 19 17V7Z",fill:"currentColor"})]})},{text:'${library} = import("https://cdn.jsdelivr.net/npm/${library}@${version}/+esm")',label:"Import library",description:"Load modern JS libraries from npm",thumbnail:NPM},{text:'${library} = require("${library}@${version}")',label:"Require library",description:"Load legacy JS libraries from npm",thumbnail:NPM}].map(e=>{let{text:t,label:r,description:i,thumbnail:n}=e;return{thumbnail:n,description:i,apply:(0,d.DB)(t),label:safeLabel(r),type:s.JavaScript,boost:a.Snippet,detail:c.Snippet,origin:"importSnippets"}}),P=[{text:'${weather}.filter((${d}, i) => ${d.location === "New York"})',label:"Filter array"},{text:"${weather}.map((${d}, i) => ${d.temp_max})",label:"Map array"},{text:"${1:weather}.reduce((reduce, d, i) => ${2:reduce + d.precipitation}, ${3:0})",label:"Reduce array"},{text:"[...${weather}].sort((a, b) => b.${precipitation} - a.${precipitation})",label:"Sort array"}].map(e=>{let{text:t,label:r}=e;return{thumbnail:Transform,apply:(0,d.DB)(t),label:safeLabel(r),type:s.Snippet,boost:a.Snippet,detail:c.Snippet,origin:"transformSnippets"}}),$=[{text:'Plot.plot({\n	marks: [\n		Plot.areaY(${aapl}, {x: "${Date}", y: "${Close}"}),\n		Plot.ruleY([0])\n	]\n})',label:"Area chart",description:"Values over time as filled areas",thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("path",{d:"M12.0417 18.2281L4 25C3.63098 25.369 3.89233 26 4.41421 26H45.0001C45.5523 26 46.0001 25.5523 46.0001 25V5.20711C46.0001 5.0745 45.9474 4.94732 45.8536 4.85355C45.6584 4.65829 45.3418 4.65829 45.1465 4.85355L36.3787 13.6213C35.8161 14.1839 35.0531 14.5 34.2574 14.5H26.7427C25.9471 14.5 25.184 14.8161 24.6214 15.3787L21.4792 18.5208C20.5905 19.4096 19.2419 19.6501 18.1007 19.1234L15.2312 17.799C14.1748 17.3114 12.9317 17.4787 12.0417 18.2281Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},{text:'Plot.plot({\n	marks: [\n		Plot.areaY(${weather.slice(-365)}, {x: "${date}", y1: "${temp_min}", y2: "${temp_max}", curve: "step"})\n	]\n})',label:"Band area chart",description:"Values over time as filled areas",thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("path",{d:"M12.0416 18.2281L4.11345 24.9045C4.03861 24.9675 3.97743 25.0451 3.93367 25.1327C3.62808 25.7438 4.26801 26.3962 4.88495 26.1024L12.5552 22.4499C13.167 22.1586 13.8594 22.0829 14.5196 22.2353L18.7752 23.2174C19.5588 23.3982 20.3821 23.2569 21.0604 22.8252L24.9634 20.3415C25.3172 20.1163 25.7143 19.9679 26.129 19.9056L35.0005 18.5749C35.3312 18.5253 35.6512 18.4208 35.9475 18.2656L44.392 13.8423C45.3806 13.3245 46 12.3007 46 11.1848V5.20711C46 5.0745 45.9473 4.94732 45.8536 4.85355C45.6583 4.65829 45.3417 4.65829 45.1464 4.85355L36.3787 13.6213C35.8161 14.1839 35.053 14.5 34.2574 14.5H26.7426C25.947 14.5 25.1839 14.8161 24.6213 15.3787L21.4792 18.5208C20.5904 19.4096 19.2419 19.6501 18.1007 19.1234L15.2312 17.799C14.1747 17.3114 12.9316 17.4787 12.0416 18.2281Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},{text:'Plot.plot({\n	y: {\n		tickFormat: "s"\n	},\n	marks: [\n		Plot.areaY(${industries}, {x: "${date}", y: "${unemployed}", fill: "${industry}"}),\n		Plot.ruleY([0])\n	]\n})',label:"Stacked area chart",description:"Values over time as filled areas",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M12.0415 18.2282L4.05513 24.9536C4.01851 24.9844 3.98576 25.0196 3.9576 25.0583C3.67249 25.4502 3.95242 26 4.43704 26H44.9999C45.5522 26 45.9999 25.5523 45.9999 25V5.20711C45.9999 5.0745 45.9472 4.94732 45.8535 4.85355C45.6582 4.65829 45.3416 4.65829 45.1464 4.85355L36.3786 13.6213C35.816 14.1839 35.0529 14.5 34.2573 14.5H26.7425C25.9469 14.5 25.1838 14.8161 24.6212 15.3787L21.4791 18.5208C20.5903 19.4096 19.2418 19.6501 18.1006 19.1234L15.2311 17.799C14.1746 17.3114 12.9315 17.4787 12.0415 18.2282Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("path",{d:"M2.5 26L12.0338 22.3681C12.6675 22.1267 13.3522 22.0503 14.0235 22.1462L18.4871 22.7839C19.4614 22.9231 20.4527 22.6982 21.2716 22.1523L24.7876 19.8082C25.5707 19.2862 26.5128 19.057 27.4482 19.1609L33.6581 19.8509C34.5286 19.9476 35.4067 19.756 36.1578 19.3053L47.5 12.5",stroke:"#f5f5f5"})]})},{text:'Plot.plot({\n	x: {\n		type: "log"\n	},\n	marks: [\n		Plot.arrow(${citywages}, {\n			x1: "${POP_1980}",\n			y1: "${R90_10_1980}",\n			x2: "${POP_2015}",\n			y2: "${R90_10_2015}",\n			bend: true\n		})\n	]\n})',label:"Arrow chart",description:"Connected pairs of values",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("line",{x1:"17.0882",y1:"23.5885",x2:"32.5885",y2:"9.91178",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,v.jsx)("line",{x1:"32.4215",y1:"24.7095",x2:"39.7095",y2:"5.57849",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,v.jsx)("line",{x1:"24.4148",y1:"21.7125",x2:"29.7125",y2:"7.58521",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,v.jsx)("line",{x1:"37.4019",y1:"21.7185",x2:"40.7185",y2:"12.5981",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,v.jsx)("line",{x1:"6.04284",y1:"19.5864",x2:"21.5864",y2:"4.95716",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,v.jsx)("line",{x1:"7.05652",y1:"24.5869",x2:"18.5869",y2:"13.9435",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.barY(${alphabet}, {x: "${letter}", y: "${frequency}", sort: {x: "y", reverse: true}}),\n		Plot.ruleY([0])\n	]\n})',label:"Bar chart",description:"Values by category as bars",thumbnail:BarVertical},{text:'Plot.plot({\n	marks: [\n		Plot.barX(${alphabet}, {x: "${frequency}", y: "${letter}", sort: {y: "x", reverse: true}}),\n		Plot.ruleX([0])\n	]\n})',label:"Horizontal bar chart",description:"Values by category as bars",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M3 5C3 3.89543 3.89543 3 5 3H21C22.1046 3 23 3.89543 23 5V8C23 9.10457 22.1046 10 21 10H5C3.89543 10 3 9.10457 3 8V5Z",fill:"currentColor"}),(0,v.jsx)("rect",{x:"3",y:"11",width:"14",height:"7",rx:"2",fill:"currentColor"}),(0,v.jsx)("path",{d:"M3 21C3 19.8954 3.89543 19 5 19H31C32.1046 19 33 19.8954 33 21V24C33 25.1046 32.1046 26 31 26H5C3.89543 26 3 25.1046 3 24V21Z",fill:"currentColor"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.rectY(${weather.slice(-42)}, {x: "${date}", y: "${wind}", interval: ${d3.utcDay}}),\n		Plot.ruleY([0])\n	]\n})',label:"Temporal bar chart",description:"Values over time as rects",thumbnail:BarVertical},{text:'Plot.plot({\n	marks: [\n		Plot.boxX(${olympians}, {x: "${weight}", y: "${sport}", sort: {y: "x"}})\n	]\n})',label:"Box plot",description:"Quantitative distributions as boxes",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"14.5",y:"6.5",width:"15",height:"7",rx:"0.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"22.5",y:"16.5",width:"15",height:"7",rx:"0.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"19",y:"6",width:"2",height:"8",fill:"currentColor"}),(0,v.jsx)("rect",{x:"31",y:"16",width:"2",height:"8",fill:"currentColor"}),(0,v.jsx)("path",{d:"M9 10C9 9.44772 9.44772 9 10 9H14V11H10C9.44772 11 9 10.5523 9 10V10Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M16 20C16 19.4477 16.4477 19 17 19H22V21H17C16.4477 21 16 20.5523 16 20V20Z",fill:"currentColor"}),(0,v.jsx)("rect",{x:"6",y:"9",width:"2",height:"2",rx:"1",fill:"currentColor"}),(0,v.jsx)("path",{d:"M30 9H36C36.5523 9 37 9.44772 37 10V10C37 10.5523 36.5523 11 36 11H30V9Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M38 19H43C43.5523 19 44 19.4477 44 20V20C44 20.5523 43.5523 21 43 21H38V19Z",fill:"currentColor"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.cell(${weather.slice(-365)}, {\n			x: ${d => d.date.getUTCDate()},\n			y: ${d => d.date.getUTCMonth()},\n			fill: "${temp_max}"\n		})\n	]\n})',label:"Cell chart",description:"Values by category in a grid",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"8.5",y:"12.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"15.5",y:"5.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"15",y:"12",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"22",y:"5",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"22",y:"12",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"29.5",y:"5.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"29.5",y:"12.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"36",y:"5",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"36",y:"12",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"8",y:"19",width:"6",height:"6",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"15.5",y:"19.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"22.5",y:"19.5",width:"5",height:"5",rx:"0.5",stroke:"currentColor"})]})},{text:'Plot.plot({\n	facet: {\n		data: ${penguins},\n		x: "${species}"\n	},\n	marks: [\n		Plot.frame(),\n		Plot.dot(${penguins}, {x: "${culmen_length_mm}", y: "${culmen_depth_mm}"})\n	]\n})',label:"Faceted chart",description:"Small multiples",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("circle",{cx:"8.5",cy:"20.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"11.5",cy:"11.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"13.5",cy:"15.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"17.5",cy:"19.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"31.5",cy:"14.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"33.5",cy:"10.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"42.5",cy:"7.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"39.5",cy:"11.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("path",{d:"M25 5L25 26",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.rectY(${olympians}, Plot.binX({y: "count"}, {x: "${weight}"})),\n		Plot.ruleY([0])\n	]\n})',label:"Histogram chart",description:"Quantitative distribution as bars",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M3 11C3 9.89543 3.89543 9 5 9H9C10.1046 9 11 9.89543 11 11V25C11 26.1046 10.1046 27 9 27H5C3.89543 27 3 26.1046 3 25V11Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M12 7C12 5.89543 12.8954 5 14 5H18C19.1046 5 20 5.89543 20 7V25C20 26.1046 19.1046 27 18 27H14C12.8954 27 12 26.1046 12 25V7Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M21 17C21 15.8954 21.8954 15 23 15H27C28.1046 15 29 15.8954 29 17V25C29 26.1046 28.1046 27 27 27H23C21.8954 27 21 26.1046 21 25V17Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M30 22C30 20.8954 30.8954 20 32 20H36C37.1046 20 38 20.8954 38 22V25C38 26.1046 37.1046 27 36 27H32C30.8954 27 30 26.1046 30 25V22Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M39 25C39 23.8954 39.8954 23 41 23H45C46.1046 23 47 23.8954 47 25V25C47 26.1046 46.1046 27 45 27H41C39.8954 27 39 26.1046 39 25V25Z",fill:"currentColor"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.ruleY([0]),\n		Plot.lineY(${aapl}, {x: "${Date}", y: "${Close}"})\n	]\n})',label:"Line chart",description:"Values over time as lines",thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("path",{d:"M5.5 24.5L12.0258 18.3821C12.9169 17.5466 14.2257 17.3349 15.3348 17.8468L18.1007 19.1234C19.2419 19.6501 20.5904 19.4096 21.4792 18.5208L24.6213 15.3787C25.1839 14.8161 25.947 14.5 26.7426 14.5H34.2574C35.053 14.5 35.8161 14.1839 36.3787 13.6213L44.5 5.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},{text:'Plot.plot({\n	marks: [\n		Plot.ruleY([0]),\n		Plot.lineY(${1:aapl}, Plot.windowY({x: "${2:Date}", y: "${3:Close}", k: ${4:10}, reduce: "mean"}))\n	]\n})',label:"Moving average line chart",description:"Values over time as smoothed lines",thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("path",{d:"M42.5 6.5L37.7448 12.3874C34.308 16.6425 28.5479 18.2447 23.4076 16.3755V16.3755C18.6077 14.6301 13.2295 15.9041 9.7226 19.6172L7 22.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},{text:'Plot.plot({\n	marks: [\n		Plot.ruleY([0]),\n		Plot.lineY(${industries}, {x: "${date}", y: "${unemployed}", z: "${industry}"})\n	]\n})',label:"Multi-series line chart",description:"Multiple values over time as lines",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("path",{d:"M35.6702 11.5014C34.9458 10.8618 34.0064 10.5 33.0228 10.5H28.7119C27.2973 10.5 25.9878 11.2472 25.2682 12.4651L25.0793 12.7848C25.6086 12.598 26.1706 12.5 26.7426 12.5H34.2574C34.5226 12.5 34.7769 12.3946 34.9645 12.2071L35.6702 11.5014Z"}),(0,v.jsx)("path",{d:"M7.9091 19.5H5.5C4.94772 19.5 4.5 19.9477 4.5 20.5C4.5 21.0523 4.94772 21.5 5.5 21.5H5.77577L7.9091 19.5Z"}),(0,v.jsx)("path",{d:"M11.6242 21.5H14.0132C14.2281 21.5 14.4417 21.5347 14.6456 21.6026L17.885 22.6824C19.6731 23.2785 21.6348 22.5453 22.5936 20.9226L23.5871 19.2413L22.8934 19.935C21.4121 21.4163 19.1646 21.8171 17.2626 20.9393L14.4967 19.6627C14.127 19.4921 13.6907 19.5627 13.3937 19.8412L11.6242 21.5Z"}),(0,v.jsx)("path",{d:"M36.6257 15.9035L37.8067 17.4388C38.5639 18.4232 39.7353 19 40.9772 19H44.5C45.0523 19 45.5 18.5523 45.5 18C45.5 17.4477 45.0523 17 44.5 17H40.9772C40.3563 17 39.7705 16.7116 39.392 16.2194L38.182 14.6464L37.7929 15.0355C37.445 15.3834 37.0512 15.6747 36.6257 15.9035Z"}),(0,v.jsx)("path",{d:"M38.9524 8.21924L37.2871 7.14172C36.6398 6.72285 35.8851 6.5 35.1141 6.5H26.7427C25.6818 6.5 24.6644 6.92143 23.9143 7.67157L19.6716 11.9142C19.2965 12.2893 18.7878 12.5 18.2574 12.5H14.2082C13.5873 12.5 12.9748 12.6446 12.4194 12.9223L5.05283 16.6056C4.55885 16.8526 4.35863 17.4532 4.60562 17.9472C4.85261 18.4412 5.45328 18.6414 5.94726 18.3944L13.3138 14.7111C13.5915 14.5723 13.8978 14.5 14.2082 14.5H18.2574C19.3183 14.5 20.3357 14.0786 21.0858 13.3284L25.3285 9.08579C25.7035 8.71071 26.2123 8.5 26.7427 8.5H35.1141C35.4996 8.5 35.8769 8.61142 36.2006 8.82086L37.5061 9.66556L38.9524 8.21924Z"}),(0,v.jsx)("path",{d:"M40.9406 11.8879L43.9568 13.8396C44.4205 14.1396 45.0396 14.0069 45.3396 13.5433C45.6396 13.0796 45.507 12.4605 45.0433 12.1604L42.3869 10.4416L40.9406 11.8879Z"})]}),(0,v.jsx)("path",{d:"M5.5 24.5L12.0258 18.3821C12.9169 17.5466 14.2257 17.3349 15.3348 17.8468L18.1007 19.1234C19.2419 19.6501 20.5904 19.4096 21.4792 18.5208L24.6213 15.3787C25.1839 14.8161 25.947 14.5 26.7426 14.5H34.2574C35.053 14.5 35.8161 14.1839 36.3787 13.6213L44.5 5.5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.dot(${cars}, {x: "${power (hp)}", y: "${economy (mpg)}"})\n	]\n})',label:"Scatterplot chart",description:"Correlation or distribution as dots",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("circle",{cx:"10.5",cy:"20.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"14.5",cy:"15.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"16.5",cy:"16.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"28.5",cy:"14.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"34.5",cy:"13.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"36.5",cy:"12.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"23.5",cy:"18.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"20.5",cy:"12.5",r:"2",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"40.5",cy:"8.5",r:"2",stroke:"currentColor"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.tickX(${cars}, {x: "${economy (mpg)}", y: "${year}"})\n	]\n})',label:"Tick chart",description:"Quantitative distributions as lines",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"8",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"11",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"19",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"22",y:"9",width:"5",height:"12",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"28",y:"9",width:"3",height:"12",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"32",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"40",y:"9",width:"2",height:"12",rx:"1",fill:"currentColor"})]})},{text:'Plot.plot({\n	marks: [\n		Plot.barX(${olympians}, Plot.groupY({x: "count"}, {y: "${nationality}", sort: {y: "x", reverse: true, limit: 10}})),\n		Plot.ruleX([0])\n	]\n})',label:"Top 10 bar chart",description:"Group and sort categories by count",thumbnail:Top10Chart},{text:'Plot.plot({\n	marks: [\n		Plot.barX(${olympians}, Plot.groupY({x: "sum"}, {x: "${gold}", y: "${nationality}", sort: {y: "x", reverse: true, limit: 10}})),\n		Plot.ruleX([0])\n	]\n})',label:"Weighted top 10 bar chart",description:"Group and sort categories by value",thumbnail:Top10Chart},{text:'Plot.plot({\n	color: {\n		scheme: "ylgnbu"\n	},\n	marks: [\n		Plot.hexagon(${olympians}, Plot.hexbin({fill: "sum"}, {x: "${weight}", y: "${height}"}))\n	]\n})',label:"Hexbin chart",description:"Distribution as hexagonal bins",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsx)("path",{d:"M27 5L30.0311 6.75V10.25L27 12L23.9689 10.25V6.75L27 5Z"}),(0,v.jsx)("path",{d:"M19 19L22.0311 20.75V24.25L19 26L15.9689 24.25V20.75L19 19Z"}),(0,v.jsx)("path",{d:"M27 19L30.0311 20.75V24.25L27 26L23.9689 24.25V20.75L27 19Z"}),(0,v.jsx)("path",{d:"M23 12L26.0311 13.75V17.25L23 19L19.9689 17.25V13.75L23 12Z"}),(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("path",{d:"M19 5L22.0311 6.75V10.25L19 12L15.9689 10.25V6.75L19 5Z"}),(0,v.jsx)("path",{d:"M35 5L38.0311 6.75V10.25L35 12L31.9689 10.25V6.75L35 5Z"}),(0,v.jsx)("path",{d:"M15 12L18.0311 13.75V17.25L15 19L11.9689 17.25V13.75L15 12Z"}),(0,v.jsx)("path",{d:"M31 12L34.0311 13.75V17.25L31 19L27.9689 17.25V13.75L31 12Z"})]}),(0,v.jsxs)("g",{stroke:"currentColor",fill:"none",children:[(0,v.jsx)("path",{d:"M8.46891 7.03868L11 5.57735L13.5311 7.03868V9.96133L11 11.4226L8.46891 9.96133V7.03868Z"}),(0,v.jsx)("path",{d:"M8.46891 21.0387L11 19.5774L13.5311 21.0387V23.9613L11 25.4226L8.46891 23.9613V21.0387Z"}),(0,v.jsx)("path",{d:"M32.4689 21.0387L35 19.5774L37.5311 21.0387V23.9613L35 25.4226L32.4689 23.9613V21.0387Z"}),(0,v.jsx)("path",{d:"M36.4689 14.0387L39 12.5774L41.5311 14.0387V16.9613L39 18.4226L36.4689 16.9613V14.0387Z"})]})]})},{text:'Plot.plot({\n	height: 180,\n	marks: [\n		Plot.dot(${cars}, Plot.dodgeY({x: "${weight (lb)}"}))\n	]\n})',label:"Beeswarm chart",description:"Distribution as dodged dots",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsx)("circle",{cx:"7",cy:"23",r:"2"}),(0,v.jsx)("circle",{cx:"10",cy:"18",r:"2"}),(0,v.jsx)("circle",{cx:"13",cy:"23",r:"2"}),(0,v.jsx)("circle",{cx:"25",cy:"23",r:"2"}),(0,v.jsx)("circle",{cx:"31",cy:"23",r:"2"}),(0,v.jsx)("circle",{cx:"31",cy:"18",r:"2"}),(0,v.jsx)("circle",{cx:"40",cy:"8",r:"2"}),(0,v.jsx)("circle",{cx:"25",cy:"18",r:"2"}),(0,v.jsx)("circle",{cx:"40",cy:"18",r:"2"}),(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("circle",{cx:"37",cy:"23",r:"2"}),(0,v.jsx)("circle",{cx:"43",cy:"23",r:"2"}),(0,v.jsx)("circle",{cx:"19",cy:"23",r:"2"}),(0,v.jsx)("circle",{cx:"7",cy:"13",r:"2"}),(0,v.jsx)("circle",{cx:"31",cy:"13",r:"2"}),(0,v.jsx)("circle",{cx:"43",cy:"13",r:"2"}),(0,v.jsx)("circle",{cx:"31",cy:"8",r:"2"})]})]})},{text:'Plot.plot({\n	marks: [\n		Plot.linearRegressionY(${penguins}, {x: "${culmen_length_mm}", y: "${culmen_depth_mm}", stroke: "${species}"})\n	]\n})',label:"Linear regression",description:"Best-fit line with confidence band",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M3 13.9929V25.5901C3 26.2791 3.67724 26.7642 4.32901 26.541C8.08911 25.2528 18.9841 21.5945 26 20C32.4908 18.5248 41.1601 18.1371 45.0116 18.0357C46.1128 18.0067 47 17.1092 47 16.0076V4.44494C47 3.7462 46.3043 3.25974 45.6481 3.49983C42.0325 4.82277 31.9433 8.42199 25 10C18.4281 11.4936 9.0376 11.8724 4.98598 11.968C3.88448 11.994 3 12.8911 3 13.9929Z",fill:"currentColor",fillOpacity:"0.35"}),(0,v.jsx)("path",{d:"M5 20L45 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),newUntil:new Date(Date.UTC(2022,7,15))},{text:'Plot.plot({\n	marks: [\n		Plot.voronoi(${penguins}, {x: "${culmen_depth_mm}", y: "${culmen_length_mm}", fill: "${species}", stroke: "white"})\n	]\n})',label:"Voronoi diagram",description:"Delaunay partition by closest point",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsx)("path",{d:"M8.3406 3H4C3.44772 3 3 3.44772 3 4V26C3 26.5523 3.44771 27 4 27H6.33498L12.4139 12.5042L8.3406 3Z",fillOpacity:"0.35"}),(0,v.jsx)("path",{d:"M8.50373 27H28V18.7063L14.0566 13.7586L8.50373 27Z"}),(0,v.jsx)("path",{d:"M30 27H46C46.5523 27 47 26.5523 47 26V16.1714L37.1934 12.1596L30 18.4538V27Z"}),(0,v.jsx)("path",{d:"M47 14.0105V4C47 3.44772 46.5523 3 46 3H38V10.3286L47 14.0105Z"}),(0,v.jsx)("path",{d:"M36 3H10.5165L14.2468 11.7039L28.7823 16.8617L36 10.5462V3Z",fillOpacity:"0.35"})]}),newUntil:new Date(Date.UTC(2022,7,15))},{text:'Plot.plot({\n	marks: [\n		Plot.density(${cars}, { x: "${power (hp)}", y: "${economy (mpg)}" })\n	]\n})',label:"Density contours",description:"Density estimates for point clouds",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M4.44721 14.1056C3.95324 13.8586 3.35256 14.0588 3.10557 14.5528C2.85858 15.0468 3.05881 15.6474 3.55279 15.8944L4.44721 14.1056ZM18.6247 3.21913C18.1934 2.87412 17.5641 2.94404 17.2191 3.3753C16.8741 3.80657 16.944 4.43586 17.3753 4.78087L18.6247 3.21913ZM3.55279 15.8944C5.624 16.93 8.73521 18.1 11.941 18.4926C15.1278 18.8828 18.6028 18.5243 21.1644 16.2474L19.8356 14.7526C17.8972 16.4757 15.1222 16.8672 12.184 16.5074C9.26479 16.15 6.376 15.07 4.44721 14.1056L3.55279 15.8944ZM21.1644 16.2474C22.4476 15.1067 23.1371 13.8087 23.3476 12.45C23.5551 11.1103 23.2846 9.79682 22.7997 8.61925C21.8398 6.28808 19.9576 4.28549 18.6247 3.21913L17.3753 4.78087C18.5424 5.71451 20.1602 7.46192 20.9503 9.38075C21.3404 10.3282 21.5074 11.2647 21.3712 12.1438C21.2379 13.0038 20.8024 13.8933 19.8356 14.7526L21.1644 16.2474Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M4.5547 9.16795C4.09517 8.8616 3.4743 8.98577 3.16795 9.4453C2.8616 9.90483 2.98577 10.5257 3.4453 10.8321L4.5547 9.16795ZM12.0145 3.14251C11.5409 2.85836 10.9267 3.01192 10.6425 3.4855C10.3584 3.95908 10.5119 4.57334 10.9855 4.85749L12.0145 3.14251ZM3.4453 10.8321C5.0752 11.9186 7.70695 12.9628 10.1938 13.421C11.4418 13.6508 12.7115 13.7444 13.8368 13.5926C14.9509 13.4423 16.0557 13.0311 16.7809 12.1247L15.2191 10.8753C14.9443 11.2189 14.4241 11.4952 13.5694 11.6105C12.726 11.7243 11.6832 11.6617 10.5562 11.454C8.29305 11.0372 5.9248 10.0814 4.5547 9.16795L3.4453 10.8321ZM16.7809 12.1247C17.4806 11.25 17.6563 10.2597 17.4748 9.29877C17.3013 8.38009 16.8101 7.51583 16.2288 6.76355C15.0651 5.25767 13.3295 3.9315 12.0145 3.14251L10.9855 4.85749C12.1705 5.5685 13.6849 6.74233 14.6462 7.98645C15.1274 8.60917 15.4175 9.18241 15.5096 9.66998C15.5937 10.1153 15.5194 10.5 15.2191 10.8753L16.7809 12.1247Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M25.3575 3.4855C25.0733 3.01192 24.4591 2.85836 23.9855 3.14251C23.5119 3.42666 23.3584 4.04092 23.6425 4.5145L25.3575 3.4855ZM45.9005 12.495C46.45 12.55 46.9401 12.149 46.995 11.5995C47.05 11.05 46.649 10.5599 46.0995 10.505L45.9005 12.495ZM23.6425 4.5145C25.1785 7.07446 27.4912 10.3845 32.1838 11.9487L32.8162 10.0513C28.8176 8.71845 26.8215 5.92554 25.3575 3.4855L23.6425 4.5145ZM32.1838 11.9487C34.5441 12.7355 36.8273 12.7241 39.0583 12.6043C41.3251 12.4825 43.5 12.255 45.9005 12.495L46.0995 10.505C43.5 10.245 41.0977 10.4918 38.951 10.6071C36.7683 10.7244 34.8015 10.7131 32.8162 10.0513L32.1838 11.9487Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M31.7071 3.29289C31.3166 2.90237 30.6834 2.90237 30.2929 3.29289C29.9024 3.68342 29.9024 4.31658 30.2929 4.70711L31.7071 3.29289ZM46.3162 6.44868C46.8402 6.27404 47.1233 5.70772 46.9487 5.18377C46.774 4.65983 46.2077 4.37667 45.6838 4.55132L46.3162 6.44868ZM30.2929 4.70711C32.4744 6.88866 35.2264 8 38 8V6C35.7736 6 33.5256 5.11134 31.7071 3.29289L30.2929 4.70711ZM38 8C40.6413 8 43.2523 7.47001 46.3162 6.44868L45.6838 4.55132C42.7477 5.52999 40.3587 6 38 6V8Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M4.44721 18.6056C3.95324 18.3586 3.35256 18.5588 3.10557 19.0528C2.85858 19.5468 3.05881 20.1474 3.55279 20.3944L4.44721 18.6056ZM28.2 26.6C28.5314 27.0418 29.1582 27.1314 29.6 26.8C30.0418 26.4686 30.1314 25.8418 29.8 25.4L28.2 26.6ZM3.55279 20.3944C6.56062 21.8983 11.2452 24 16 24V22C11.7548 22 7.43938 20.1017 4.44721 18.6056L3.55279 20.3944ZM16 24C17.1398 24 18.3776 23.9361 19.5339 23.9059C20.7172 23.875 21.8667 23.8766 22.955 23.9942C25.1218 24.2285 26.931 24.9081 28.2 26.6L29.8 25.4C28.069 23.0919 25.6282 22.2715 23.17 22.0058C21.9458 21.8734 20.689 21.875 19.4817 21.9066C18.2474 21.9389 17.1102 22 16 22V24Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M4.44721 23.1056C3.95324 22.8586 3.35256 23.0588 3.10557 23.5528C2.85858 24.0468 3.05881 24.6474 3.55279 24.8944L4.44721 23.1056ZM9.25746 26.9701C9.79326 27.1041 10.3362 26.7783 10.4701 26.2425C10.6041 25.7067 10.2783 25.1638 9.74254 25.0299L9.25746 26.9701ZM3.55279 24.8944C4.61259 25.4243 7.181 26.451 9.25746 26.9701L9.74254 25.0299C7.819 24.549 5.38741 23.5757 4.44721 23.1056L3.55279 24.8944Z",fill:"currentColor"}),(0,v.jsx)("path",{d:"M35 26C33.4999 24 29.5 21 32.5 18C35.4999 15 42 16 46 17.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,v.jsx)("path",{d:"M41 26C39 25.0001 37.0001 23 38.5 21.5C40 20 44 21.5 46 23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),newUntil:new Date(Date.UTC(2022,7,15))}].map(e=>{let{text:t,label:r,description:i,thumbnail:n,newUntil:o}=e;return{thumbnail:n,description:i,apply:(0,d.DB)(t),label:safeLabel(r),type:s.Snippet,boost:a.Snippet,detail:c.Snippet,origin:"plotSnippets",newUntil:o}}),A=[{apply:namedSnippet(e=>"viewof #{".concat(e("button"),'} = Inputs.button("#{Click me}")')),label:"Button input",shortLabel:"Button",description:"Do something on click",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"13",y:"11",width:"24",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,v.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("checkboxes"),'} = Inputs.checkbox(#{["A", "B"]}, {label: "#{Select some}", value: [#{"A"}]})')),label:"Checkbox input",shortLabel:"Checkbox",description:"Choose one or many from a list",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"29.5",y:"8.5",width:"13",height:"13",rx:"1.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"7.5",y:"8.5",width:"13",height:"13",rx:"1.5",fill:"currentColor",stroke:"currentColor"}),(0,v.jsx)("path",{d:"M11 16L13 18L18 12",stroke:"#f5f5f5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("color"),'} = Inputs.color({label: "#{Favorite color}", value: "#{#4682b4}"})')),label:"Color input",shortLabel:"Color",description:"Choose a color from a palette",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("defs",{children:(0,v.jsx)("clipPath",{id:"clip0_1995_7024",children:(0,v.jsx)("rect",{x:"3",y:"3",width:"44",height:"24",rx:"2",fill:"white"})})}),(0,v.jsxs)("g",{clipPath:"url(#clip0_1995_7024)",children:[(0,v.jsxs)("g",{stroke:"currentColor",children:[(0,v.jsx)("rect",{x:"6.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,v.jsx)("rect",{x:"14.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,v.jsx)("rect",{x:"22.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,v.jsx)("rect",{x:"30.5",y:"6.5",width:"5",height:"5",rx:"0.5"}),(0,v.jsx)("rect",{x:"38.5",y:"6.5",width:"5",height:"5",rx:"0.5"})]}),(0,v.jsxs)("g",{fill:"currentColor",children:[(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("rect",{x:"6",y:"14",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"14",y:"14",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"22",y:"14",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"30",y:"14",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"38",y:"14",width:"6",height:"6",rx:"1"})]}),(0,v.jsx)("rect",{x:"6",y:"22",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"14",y:"22",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"22",y:"22",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"30",y:"22",width:"6",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"38",y:"22",width:"6",height:"6",rx:"1"})]})]}),(0,v.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("date"),'} = Inputs.date({label: "#{Date}", value: "#{').concat(new Date().toISOString().slice(0,10),'}"})')),label:"Date input",shortLabel:"Date",description:"Choose a date from a calendar",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsxs)("g",{stroke:"currentColor",children:[(0,v.jsx)("rect",{x:"35.5",y:"12.5",width:"7",height:"6",rx:"0.5"}),(0,v.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5"})]}),(0,v.jsxs)("g",{fill:"currentColor",children:[(0,v.jsx)("path",{d:"M36 11.5C36 11.2239 36.2239 11 36.5 11V11C36.7761 11 37 11.2239 37 11.5V13H36V11.5Z"}),(0,v.jsx)("path",{d:"M41 11.5C41 11.2239 41.2239 11 41.5 11V11C41.7761 11 42 11.2239 42 11.5V13H41V11.5Z"}),(0,v.jsx)("rect",{x:"36",y:"13",width:"6",height:"1"}),(0,v.jsx)("rect",{x:"7",y:"11",width:"24",height:"8",rx:"1",fillOpacity:"0.35"})]})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("file"),'} = Inputs.file({label: "Data"})')),label:"File input",shortLabel:"File",description:"Choose a local file",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsxs)("g",{stroke:"currentColor",children:[(0,v.jsx)("path",{d:"M42 18.5H37C36.7239 18.5 36.5 18.2761 36.5 18V12C36.5 11.7239 36.7239 11.5 37 11.5H39.5858C39.7184 11.5 39.8456 11.5527 39.9393 11.6464L41.1464 12.8536L42.3536 14.0607C42.4473 14.1544 42.5 14.2816 42.5 14.4142V18C42.5 18.2761 42.2761 18.5 42 18.5Z"}),(0,v.jsx)("path",{d:"M39.5 11.5V14C39.5 14.2761 39.7239 14.5 40 14.5H42.5"}),(0,v.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5"})]}),(0,v.jsx)("rect",{x:"7",y:"11",width:"24",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("radios"),'} = Inputs.radio(#{["A", "B"]}, {label: "#{Select one}", value: "#{A}"})')),label:"Radio input",shortLabel:"Radio",description:"Choose one from a list",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"29.5",y:"8.5",width:"13",height:"13",rx:"6.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"7.5",y:"8.5",width:"13",height:"13",rx:"6.5",fill:"currentColor",stroke:"currentColor"}),(0,v.jsx)("circle",{cx:"14",cy:"15",r:"3",fill:"#f5f5f5"})]})},{apply:namedSnippet(e=>"viewof #{1:".concat(e("range"),'} = Inputs.range([#{2:0}, #{3:100}], {label: "#{Amount}", step: #{4:1}})')),label:"Range input",shortLabel:"Range",description:"Choose a number with a slider",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"3.5",y:"12.5",width:"43",height:"5",rx:"2.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"3",y:"12",width:"31",height:"6",rx:"3",fill:"currentColor"}),(0,v.jsx)("circle",{cx:"32",cy:"15",r:"5.5",fill:"#f5f5f5",stroke:"currentColor"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("search"),"} = Inputs.search(#{cars})")),label:"Search input",shortLabel:"Search",description:"Full-text search of tabular data",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"}),(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0625 16.25C11.2706 16.25 12.25 15.2706 12.25 14.0625C12.25 12.8544 11.2706 11.875 10.0625 11.875C8.85438 11.875 7.875 12.8544 7.875 14.0625C7.875 15.2706 8.85438 16.25 10.0625 16.25ZM10.0625 17.5C11.961 17.5 13.5 15.961 13.5 14.0625C13.5 12.164 11.961 10.625 10.0625 10.625C8.16402 10.625 6.625 12.164 6.625 14.0625C6.625 15.961 8.16402 17.5 10.0625 17.5Z",fill:"currentColor"}),(0,v.jsx)("rect",{x:"11.7324",y:"16.6161",width:"1.25",height:"3.125",transform:"rotate(-45 11.7324 16.6161)",fill:"currentColor"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("select"),'} = Inputs.select(#{["A", "B"]}, {label: "#{Select one}"})')),label:"Select input",shortLabel:"Select",description:"Choose one from a dropdown",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"6",y:"11",width:"23",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,v.jsx)("path",{d:"M36 14L39 17L42 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("table"),"} = Inputs.table(#{cars})")),label:"Table input",shortLabel:"Table",description:"Choose rows from a tabular dataset",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor"}),(0,v.jsxs)("g",{fill:"currentColor",children:[(0,v.jsx)("rect",{x:"6",y:"6",width:"14",height:"4",rx:"1"}),(0,v.jsx)("rect",{x:"22",y:"6",width:"18",height:"4",rx:"1"}),(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("rect",{x:"6",y:"13",width:"8",height:"4",rx:"1"}),(0,v.jsx)("rect",{x:"6",y:"20",width:"10",height:"4",rx:"1"}),(0,v.jsx)("rect",{x:"22",y:"13",width:"22",height:"4",rx:"1"}),(0,v.jsx)("rect",{x:"22",y:"20",width:"21",height:"4",rx:"1"})]})]})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("text"),'} = Inputs.text({label: "#{Name}"})')),label:"Text input",shortLabel:"Text",description:"Freeform, single-line text input",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"7",y:"11",width:"11",height:"8",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,v.jsx)("path",{d:"M21 11V19",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("rect",{x:"3.5",y:"7.5",width:"43",height:"15",rx:"3.5",stroke:"currentColor"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("textarea"),'} = Inputs.textarea({label: "#{Description}"})')),label:"Textarea input",shortLabel:"Textarea",description:"Freeform, multi-line text input",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor"}),(0,v.jsxs)("g",{fill:"currentColor",fillOpacity:"0.35",children:[(0,v.jsx)("rect",{x:"7",y:"7",width:"9",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"19",y:"7",width:"24",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"7",y:"17",width:"21",height:"6",rx:"1"})]}),(0,v.jsx)("path",{d:"M31 17V23",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("toggle"),'} = Inputs.toggle({label: "#{Active}", value: #{true}})')),label:"Toggle input",shortLabel:"Toggle",description:"Choose on or off",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"12",y:"8",width:"26",height:"14",rx:"7",fill:"currentColor"}),(0,v.jsx)("circle",{cx:"31",cy:"15",r:"5.5",fill:"#f5f5f5",stroke:"currentColor"})]})},{apply:namedSnippet(e=>"viewof #{".concat(e("form"),'} = Inputs.form({\n	#{option1}: Inputs.checkbox([#{"A", "B"}], {label: "#{Select some}"}),\n	#{option2}: Inputs.range([#{0, 100}], {label: "#{Amount}", step: 1}),\n	#{option3}: Inputs.radio([#{"A", "B"}], {label: "#{Select one}"}),\n	#{option4}: Inputs.select([#{"A", "B"}], {label: "#{Select one}"})\n})')),label:"Form input",shortLabel:"Form",description:"Combine multiple inputs",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"20.5",y:"4.5",width:"9",height:"9",rx:"1.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"36.5",y:"4.5",width:"9",height:"9",rx:"1.5",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"4.5",y:"4.5",width:"9",height:"9",rx:"1.5",fill:"currentColor",stroke:"currentColor"}),(0,v.jsx)("path",{d:"M6.85742 9.71456L8.28599 11.1431L11.8574 6.85742",stroke:"#f5f5f5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("rect",{x:"4.5",y:"20.5",width:"42",height:"4",rx:"2",stroke:"currentColor"}),(0,v.jsx)("rect",{x:"4",y:"20",width:"33",height:"5",rx:"2.5",fill:"currentColor"}),(0,v.jsx)("circle",{cx:"33.5",cy:"22.5",r:"4",fill:"#f5f5f5",stroke:"currentColor"})]})}].map(e=>{let{apply:t,label:r,shortLabel:i,description:n,thumbnail:o}=e;return{description:n,thumbnail:o,apply:t,label:safeLabel(r),shortLabel:i,type:s.Snippet,boost:a.Snippet,detail:c.Snippet,origin:"inputSnippets"}}),D=[{apply:namedSnippet(e=>"#{".concat(e("data"),'} = fetch("#{https://api.weather.gov/gridpoints/OKX/33,37/forecast}").then((response) => response.json())')),label:"Fetch from URL",description:"Request a file or API via an HTTP",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 10C5 8.89543 5.89543 8 7 8H13L17 12V20C17 21.1046 16.1046 22 15 22H7C5.89543 22 5 21.1046 5 20V10ZM12 10H7V20H15V13H12V10Z",fill:"currentColor"}),(0,v.jsx)("rect",{x:"8",y:"14",width:"5",height:"2",fill:"currentColor"}),(0,v.jsx)("rect",{x:"8",y:"17",width:"6",height:"2",fill:"currentColor"}),(0,v.jsx)("circle",{cx:"39",cy:"15",r:"6.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,v.jsx)("line",{x1:"33",y1:"17.25",x2:"45",y2:"17.25",stroke:"currentColor",strokeWidth:"1.5"}),(0,v.jsx)("path",{d:"M33 13H45",stroke:"currentColor",strokeWidth:"1.5"}),(0,v.jsx)("path",{d:"M39 9C39.5 9.83333 41.5 11.6875 41.5 15C41.5 19 39 21 39 21",stroke:"currentColor",strokeWidth:"1.5"}),(0,v.jsx)("path",{d:"M39 9C38.5 9.83333 36.5 11.6875 36.5 15C36.5 19 39 21 39 21",stroke:"currentColor",strokeWidth:"1.5"}),(0,v.jsx)("path",{d:"M21 15L19 15",stroke:"currentColor",strokeWidth:"2"}),(0,v.jsx)("path",{d:"M24 15L22 15",stroke:"currentColor",strokeWidth:"2"}),(0,v.jsx)("path",{d:"M27 15L25 15",stroke:"currentColor",strokeWidth:"2"}),(0,v.jsx)("path",{d:"M30 15L28 15",stroke:"currentColor",strokeWidth:"2"})]}),type:s.Snippet,boost:a.Snippet,detail:c.Snippet,origin:"dataSnippets"}],Z=L.concat(M,$,P),B=[[namedSnippet(e=>"#{".concat(e("name"),"} = #{1 + 2}")),"expression cell"],[namedSnippet(e=>"#{".concat(e("name"),"} = {\n	for (let i = 0; i < 100; ++i) {\n		yield i;\n	}\n}")),"generator cell"],[namedSnippet(e=>"#{".concat(e("name"),"} = {\n	return #{1 + 2};\n}")),"block cell"],[namedSnippet(e=>"mutable #{".concat(e("name"),"} = #{1 + 2}")),"mutable cell"],[namedSnippet(e=>"viewof #{".concat(e("name"),"} = htl.html`#{<input type=range>}`")),"viewof cell"]].map(e=>{let[t,r]=e;return{apply:t,label:safeLabel(r),type:s.JavaScript,boost:a.JavaScriptCell,detail:c.Snippet,origin:"basicCellSnippets"}}),I=B.concat(H,D,A);function acceptCompletion(e){let t=(0,d.s1)(e.state),r=(0,d.dk)(e),i=e.state.field(f.l);return r&&i&&(i({type:"acceptSnippet",id:e.state.field(g.X),source:"Autocomplete menu"}),t&&i({type:"acceptCompletion",origin:t.origin})),r}let E=[{key:"Tab",run:acceptCompletion},{key:"Ctrl-Space",run:function(e){let t=(0,d.WA)(e),r=e.state.field(f.l);return t&&r&&r({type:"requestSnippets",id:e.state.field(g.X),trigger:"keypress",source:"Ctrl-Space"}),t}},{key:"Escape",run:d._B},{key:"ArrowDown",run:(0,d.gq)(!0)},{key:"ArrowUp",run:(0,d.gq)(!1)},{key:"PageDown",run:(0,d.gq)(!0,"page")},{key:"PageUp",run:(0,d.gq)(!1,"page")},{key:"Enter",run:acceptCompletion}],F=new Set(["PropertyName",".",".?","MemberExpression","VariableName"]);function workerAutocompleteForMemberExpression(e){let t=e.state.field(f.l),r=(0,u.qz)(e.state),i=r.cursorAt(e.pos,-1),n="?."===i.name||"."===i.name,o=[];do{let{name:r,from:l,to:s}=i;if(!F.has(r))break;if("PropertyName"===r&&n&&o.push(e.state.sliceDoc(l,s)),("?."===r||"."===r)&&(n=!0),"VariableName"===r){let r=e.state.sliceDoc(l,s);return new AutocompleteTask(e,r,o).run(t)}}while(i.prev());return null}function autocomplete(){return[(0,d.ys)({defaultKeymap:!1,override:[filter(e=>X(e)&&Y(e),(0,d.Mb)(I)),filter(e=>isJavaScript(e)&&Q(e),(0,d.Mb)(_)),filter(e=>isJavaScript(e)&&(W(e)||Q(e)||Y(e)||z(e)),(0,d.Mb)(Z)),filter(e=>isJavaScript(e)&&U(e),workerAutocompleteForMemberExpression),filter(e=>isJavaScript(e)&&W(e),e=>(0,d.Mb)((void 0!==i?i:i=V.concat(Array.from((0,j.r)(),e=>({apply:(0,d.DB)(e),label:e,type:s.JavaScript,boost:a.JavaScript,detail:c.Global,origin:"global"})))).concat(Array.from(e.state.field(C.rr),e=>({apply:(0,d.DB)(e),label:e,type:s.Reference,boost:a.Reference,detail:c.Cell,origin:"references"}))))(e)),filter(e=>X(e)&&R(e),e=>(0,d.Mb)(function(e){let t=(0,u.qz)(e.state).cursorAt(e.pos,-1),r=t.node.type.name;if("VariableName"!==r&&"PropertyName"!==r&&"PrivatePropertyName"!==r)return[];let i=[];do{let r=t.node;t.parent()&&t.firstChild();do t.node!==r&&function findDeclarations(e,t,r,i){switch(e.type.name){case"ParamList":case"ObjectPattern":case"ArrayPattern":for(let n=e.firstChild;n;n=n.nextSibling)findDeclarations(n,t,r,i);break;case"PropertyDeclaration":case"VariableDeclaration":case"MethodDeclaration":case"FunctionDeclaration":case"ClassDeclaration":{let i=[...e.getChildren("VariableDefinition"),...e.getChildren("PrivatePropertyDefinition"),...e.getChildren("PropertyDefinition"),...e.getChildren("ObjectPattern")];for(let n of i)findDeclarations(n,t,r,e)}break;case"PatternProperty":findDeclarations(e.lastChild,t,r,i);break;case"PrivatePropertyName":case"PrivatePropertyDefinition":case"PropertyName":case"PropertyDefinition":case"VariableDefinition":{if(e===i)break;let n=r.state.sliceDoc(e.from,e.to);if("constructor"===n&&("PropertyDefinition"===i.type.name||"MethodDeclaration"===i.type.name))break;t.push(function(e,t){switch(t.type.name){case"VariableDeclaration":case"ParamList":case"ClassDeclaration":case"FunctionDeclaration":case"MethodDeclaration":case"PropertyDeclaration":return{label:e,type:s.JavaScript,boost:a.JavaScriptLocal,detail:c.Local,origin:"local"}}return{label:e,type:s.JavaScript,origin:"local"}}(n,i))}}}(t.node,i,e,t.node);while(t.nextSibling())}while(t.parent());return i}(e))(e)),filter(e=>isJavaScript(e)&&N(e),e=>(0,d.Mb)(e.state.field(m._).map(e=>({apply:(0,d.DB)(e),label:e,type:s.Data,boost:a.Data,detail:c.File,origin:"fileAttachments"})))(e)),filter(e=>isJavaScript(e)&&O(e),async e=>(0,d.Mb)(await databases(e))(e)),filter(e=>isJavaScript(e)&&T(e),async e=>(0,d.Mb)(await secrets(e))(e)),filter(e=>{var t;return isJavaScript(e)&&et(t=e)&&isLineStart(t)},e=>(0,d.Mb)(function(e){switch(function(e){let t=(0,u.qz)(e.state).resolve(e.pos,-1),r=t.prevSibling;return(null==r?void 0:r.name)==="VariableName"?e.state.sliceDoc(r.from,r.to):null}(e)){case"dot":return G;case"md":return ee;case"mermaid":return K;default:return[]}}(e))(e)),filter(e=>J(e)&&!q(e)&&isLineStart(e),(0,d.Mb)(ee)),filter(e=>isJavaScript(e),e=>(async e=>{let{state:t,pos:r}=e,i=t.field(w.c);if(!i||"js"!==(0,h.yq)(t))return null;let n=t.field(g.X);try{let t=await i.getCompletionsAtPosition(n,r);if(!t||t.isGlobalCompletion||t.isNewIdentifierLocation)return null;let o=t.entries.filter(e=>!e.isFromUncheckedFile);return o.length&&(isIn(["String"],0)(e)||U(e))&&(e.explicit=!0),(0,d.Mb)(o.map(e=>({label:e.name,detail:e.kind,type:s.JavaScript,boost:a.JavaScript,origin:"typescript"})))(e)}catch(e){return console.error(e),null}})(e))]}),p.tk.domEventHandlers({blur(e,t){(0,d._B)(t),(0,d.Rn)(t)}})]}function filter(e,t){return r=>e(r)?t(r):null}function isBuiltin(e){return t=>{var r,i;let n=(0,u.qz)(t.state).resolve(t.pos,-1),{name:o}=n;if("String"===o&&(null===(r=n.parent)||void 0===r?void 0:r.name)==="ArgList"&&(null===(i=n.parent.prevSibling)||void 0===i?void 0:i.name)==="VariableName"&&t.pos===n.to-1){let{from:r,to:i}=n.parent.prevSibling,o=t.state.sliceDoc(r,i);return o===e}return!1}}let N=isBuiltin("FileAttachment"),O=isBuiltin("DatabaseClient"),T=isBuiltin("Secret");function is(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return r=>{let i=(0,u.qz)(r.state).resolve(r.pos,t);return e.includes(i.name)}}function isIn(e){let t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n=>{if(n===r)return t;r=n;for(let r=(0,u.qz)(n.state).resolve(n.pos,i);r;r=r.parent)if(e.includes(r.name))return t=!0;return t=!1}}let R=is(["VariableDefinition","VariableName","PropertyName","PrivatePropertyName","Number"]),U=is([".","?.","PropertyName"]),W=is(["VariableName"]),q=isIn(["Interpolation"]),z=is(["InterpolationOpenMark"]);function isCellMode(e){return t=>t.state.field(x.C)===e}let X=isCellMode("js"),J=isCellMode("md");function isJavaScript(e){return X(e)||q(e)}function isContext(e){return t=>{var r,i;let n=(0,u.qz)(t.state).resolve(t.pos,-1);return n.name===e||"VariableName"===n.name&&(null===(r=n.parent)||void 0===r?void 0:r.name)==="ExpressionStatement"&&(null===(i=n.parent.parent)||void 0===i?void 0:i.name)===e}}let Y=isContext("Cell"),Q=isContext("Block"),K=[["graph TD\na-->b\nb-->c","graph TD"],["graph LR\na-->b\nb-->c","graph LR"]].map(e=>{let[t,r]=e;return{apply:(0,d.DB)(t),label:safeLabel(r),type:s.Snippet,boost:a.Snippet,detail:c.Mermaid,origin:"mermaidSnippets"}}),G=[["graph g {\n	a -- b -- c;\n}","graph"],["digraph g {\n	a -> b -> c;\n}","digraph"]].map(e=>{let[t,r]=e;return{apply:(0,d.DB)(t),label:safeLabel(r),type:s.Snippet,boost:a.Snippet,detail:c.Dot,origin:"dotSnippets"}}),ee=[{text:"# ${heading}",label:"Heading 1",description:"Main headline",thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("path",{d:"M25.2607 21V8.31738H23.002V13.5908H16.832V8.31738H14.5645V21H16.832V15.498H23.002V21H25.2607ZM31.2197 21H33.4873V8.31738H31.2285L27.915 10.6465V12.7822L31.0703 10.5498H31.2197V21Z",fill:"currentColor"})})},{text:"## ${heading}",label:"Heading 2",description:"Section headline",thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("path",{d:"M24.5361 20V10.1357H22.7793V14.2373H17.9805V10.1357H16.2168V20H17.9805V15.7207H22.7793V20H24.5361ZM26.6963 13.0547H28.3506C28.3506 12.0156 29.0342 11.3047 30.1074 11.3047C31.1396 11.3047 31.7549 11.9951 31.7549 12.8906C31.7549 13.6426 31.4541 14.1143 30.21 15.3721L26.792 18.8105V20H33.6416V18.5371H29.1846V18.4209L31.3037 16.3359C32.999 14.6748 33.498 13.875 33.498 12.7266C33.498 11.0859 32.165 9.88965 30.2031 9.88965C28.1455 9.88965 26.6963 11.1885 26.6963 13.0547Z",fill:"currentColor"})})},{text:"### ${heading}",label:"Heading 3",description:"Subhead",thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("path",{d:"M24.4927 19V11.2495H23.1123V14.4722H19.3418V11.2495H17.9561V19H19.3418V15.6377H23.1123V19H24.4927ZM28.0483 15.541H29.0205C29.9766 15.541 30.5566 16.019 30.5566 16.7979C30.5566 17.5498 29.9282 18.0547 29.0366 18.0547C28.1396 18.0547 27.5327 17.5928 27.4736 16.873H26.147C26.2114 18.2749 27.3662 19.1934 29.0527 19.1934C30.7285 19.1934 31.9746 18.2266 31.9746 16.8945C31.9746 15.8364 31.314 15.1543 30.2612 14.9932V14.9019C31.083 14.6816 31.6685 14.064 31.6738 13.1294C31.6792 12.0176 30.75 11.0562 29.1011 11.0562C27.4199 11.0562 26.3672 12.0068 26.2974 13.3657H27.5972C27.6562 12.5923 28.1826 12.1626 29.0259 12.1626C29.8477 12.1626 30.3364 12.6675 30.3364 13.3066C30.3364 14.0103 29.7886 14.5044 28.9937 14.5044H28.0483V15.541Z",fill:"currentColor"})})},{text:"| name   | quantity |\n| ------ | -------- |\n| apples | 12       |\n| pears  | 34       |",label:"Table",description:"Content in rows and columns",wrap:ensureNewline,thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsx)("rect",{x:"14",y:"3",width:"2",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"14",y:"9",width:"2",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"14",y:"16",width:"2",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"14",y:"22",width:"2",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"34",y:"3",width:"2",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"34",y:"9",width:"2",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"34",y:"16",width:"2",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"34",y:"22",width:"2",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"3",y:"11",width:"9",height:"2",rx:"1"}),(0,v.jsx)("rect",{x:"38",y:"11",width:"9",height:"2",rx:"1"}),(0,v.jsx)("rect",{x:"18",y:"11",width:"14",height:"2",rx:"1"}),(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("rect",{x:"18",y:"3",width:"14",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"3",y:"3",width:"9",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"3",y:"16",width:"9",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"3",y:"22",width:"9",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"18",y:"16",width:"14",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"18",y:"22",width:"14",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"38",y:"22",width:"9",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"38",y:"16",width:"9",height:"5",rx:"1"}),(0,v.jsx)("rect",{x:"38",y:"3",width:"9",height:"5",rx:"1"})]})]})},{text:"- ${text}",label:"Bulleted list",description:"Unordered series of items",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("rect",{x:"16",y:"3",width:"23",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"16",y:"12",width:"16",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"16",y:"21",width:"26",height:"6",rx:"1"})]}),(0,v.jsx)("circle",{cx:"10",cy:"6",r:"2"}),(0,v.jsx)("circle",{cx:"10",cy:"15",r:"2"}),(0,v.jsx)("circle",{cx:"10",cy:"24",r:"2"})]})},{text:"1. ${text}",label:"Numbered list",description:"Ordered series of items",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsxs)("g",{fillOpacity:"0.35",children:[(0,v.jsx)("rect",{x:"16",y:"3",width:"23",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"16",y:"12",width:"16",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"16",y:"21",width:"26",height:"6",rx:"1"})]}),(0,v.jsx)("path",{d:"M8.89062 9H10.5469V3.36328H8.89062L7.47656 4.30859V5.69531L8.8125 4.8125H8.89062V9ZM7.41406 14.1953H8.92188C8.92188 13.7617 9.19141 13.4336 9.66406 13.4336C10.1055 13.4336 10.3359 13.7188 10.3359 14.043C10.3359 14.3281 10.25 14.5547 9.55859 15.1445L7.51172 16.8984V18H11.9922V16.7344H9.71484V16.6562L10.7734 15.75C11.6367 15.0117 11.9336 14.5781 11.9336 13.9062C11.9336 12.9219 11.1523 12.207 9.74609 12.207C8.35547 12.207 7.41406 13.0039 7.41406 14.1953ZM9.04297 23.6562H9.77344C10.25 23.6562 10.5391 23.8828 10.5391 24.2656C10.5391 24.6289 10.2344 24.8711 9.77734 24.8711C9.29297 24.8711 8.99219 24.6328 8.98438 24.25H7.40625C7.45703 25.4062 8.40234 26.1562 9.80469 26.1562C11.2305 26.1562 12.2227 25.4648 12.2227 24.4414C12.2227 23.7109 11.7578 23.207 10.918 23.0938V23.0156C11.5508 22.875 11.9922 22.4297 11.9922 21.7461C11.9922 20.8906 11.2422 20.207 9.85938 20.207C8.46094 20.207 7.55859 20.9297 7.55078 22.0664H9.04688C9.0625 21.6641 9.32812 21.418 9.78516 21.418C10.2109 21.418 10.4688 21.6523 10.4688 21.9883C10.4688 22.3398 10.207 22.5781 9.78125 22.5781H9.04297V23.6562Z"})]})},{text:"> ${text}",label:"Blockquote",description:"Indented text",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,v.jsx)("rect",{x:"3",y:"3",width:"5",height:"6",rx:"1",fillOpacity:"0.35"}),(0,v.jsx)("rect",{x:"8",y:"12",width:"15",height:"6",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"3",y:"21",width:"14",height:"6",rx:"1",fillOpacity:"0.35"}),(0,v.jsx)("rect",{x:"27",y:"3",width:"14",height:"6",rx:"1",fill:"currentColor",fillOpacity:"0.35"}),(0,v.jsx)("rect",{x:"43",y:"3",width:"4",height:"6",rx:"1",fillOpacity:"0.35"}),(0,v.jsx)("rect",{x:"10",y:"3",width:"15",height:"6",rx:"1",fillOpacity:"0.35"}),(0,v.jsx)("rect",{x:"25",y:"12",width:"4",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"31",y:"12",width:"5",height:"6",rx:"1"}),(0,v.jsx)("rect",{x:"19",y:"21",width:"26",height:"6",rx:"1",fillOpacity:"0.35"})]})},{text:"![${text}](${url})",label:"Image",description:"Display a picture or figure",thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("path",{d:"M11.2915 19.958L6 23V24H44V21.7428C44 20.8583 43.6097 20.0189 42.9333 19.4488L38.4286 15.6522L36.0789 13.5985C35.0125 12.6665 33.4395 12.6072 32.306 13.4564L25.8929 18.2609L21.9998 21.0448C21.2351 21.5917 20.2583 21.7484 19.3609 21.4683L13.6806 19.6952C12.8824 19.446 12.0164 19.5413 11.2915 19.958Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor",strokeOpacity:"0.35"}),(0,v.jsx)("circle",{cx:"16",cy:"12",r:"4",fill:"currentColor"})]})},{text:"~~~\n${}\n~~~",label:"Code block",description:"Preformatted monospaced text",wrap:ensureNewline,thumbnail:e=>(0,v.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,v.jsx)("rect",{x:"4",y:"4",width:"42",height:"6",fill:"currentColor",fillOpacity:"0.35"}),(0,v.jsx)("rect",{x:"3.5",y:"3.5",width:"43",height:"23",rx:"1.5",stroke:"currentColor",strokeOpacity:"0.35"}),(0,v.jsx)("path",{d:"M28 13L32 17L28 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,v.jsx)("path",{d:"M22 21L18 17L22 13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},{text:"---${}",label:"Horizontal rule",description:"Section divider",wrap:ensureNewline,thumbnail:e=>(0,v.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,v.jsx)("rect",{x:"5",y:"14",width:"40",height:"2",rx:"1",fill:"currentColor"})})}].map(e=>{let{text:t,label:r,description:i,wrap:n=e=>e,thumbnail:o}=e;return{apply:n((0,d.DB)(t)),label:safeLabel(r),thumbnail:o,description:i,type:s.Snippet,boost:a.Snippet,detail:c.Markdown,origin:"mdSnippets"}});function ensureNewline(e){return(t,r,i,n)=>{t instanceof p.tk&&n!==t.state.doc.lineAt(n).to&&t.dispatch({changes:[{from:n,insert:"\n"}]}),e(t,r,i,n)}}function isLineStart(e){let t=e.state.doc.lineAt(e.pos);return!e.state.sliceDoc(t.from,e.pos).includes(" ")}let et=is(["TemplateString"]);async function databases(e){let t=e.state.field(y.Z);if(!t)return[];let r=await (0,k.a8)("".concat("team"===t.type?"/team/".concat(t.id):"/user","/data-connectors?detail=false"));return r.map(e=>{let{name:t}=e;return{apply:(0,d.DB)(t),label:t,type:s.Data,boost:a.Data,detail:c.Database,origin:"databases"}})}async function secrets(e){let t=e.state.field(y.Z);if(!t)return[];let r=await (0,k.a8)("".concat("team"===t.type?"/team/".concat(t.id):"/user","/secrets"));return r.map(e=>{let{name:t}=e;return{apply:(0,d.DB)(t),label:t,type:s.Data,boost:a.Data,detail:c.Secret,origin:"secrets"}})}},31432:function(e,t,r){r.d(t,{Z:function(){return empty}});function empty(e){return 0===e.doc.length}},32986:function(e,t,r){r.d(t,{Xl:function(){return I},_g:function(){return B},Hk:function(){return A},Bt:function(){return D}});var i=r(34790),n=r(45383),o=r(59119),l=r(49892),s=r(78120),a=r(14456),c=r(35524),d=r(31413),u=r(93156),p=r(74374),h=r(68092),f=r(51265),m=r(80400);let x={visibility:"hidden"};var g=r(54687),y=r(96265),C=r(65678),w=r(13961),v=r(85623),b=r(35810),k=r(7897),j=r(32341),S=r(25993),L=r(83687),M=r(56564),V=r(23939),_=r(10245),H=r(35329),P=r(76355),$=r(48764).Buffer;"undefined"==typeof btoa&&(r.g.btoa=e=>$.from("".concat(e),"binary").toString("base64"));let A={keymap:new s.F6,closeBrackets:new s.F6,modeExtensions:new s.F6,readOnly:new s.F6,sql:new s.F6,vimKeys:new s.F6},D=[...C.Y,...n.f$];function normalizeUrl(e){return e.replace(/\/$/,"").trim()}function isAbsoluteUrl(e){try{let t=new URL(e);return normalizeUrl(t.href)===normalizeUrl(e)}catch(e){return!1}}let Z=[(0,d.Hk)(),s.Wl.highest(a.$f.of(d.f8))],B=[(0,i.vQ)(),s.Wl.high(a.$f.of(i.GA))],I=[b.zT,a.tk.theme({"&":{backgroundColor:"var(--near-white)",color:"var(--syntax-normal)",margin:"0px -14px",wordBreak:"break-word",borderRadius:"0.25rem",borderLeft:"solid ".concat(4,"px transparent"),"&.cm-focused":{outline:"none !important"},"&.cm-focused .cm-activeLine":{borderLeft:"solid ".concat(4,"px var(--observable-focus-blue)"),marginLeft:"-".concat(4,"px")},"&.cm-focused .cm-activeLine.cm-errorLine":{borderLeftColor:"var(--dark-red)"},"&.cm-focused .cm-matchingBracket":{backgroundColor:"transparent",color:"var(--syntax-matchbracket)"},"&:not(.cm-focused) .cm-cursor":x,"&:not(.cm-focused) .cm-placeholder":x,"&:not(.cm-focused) .cm-selectionBackground":x},".cm-scroller":{font:"var(--monospace-font)",overflow:"initial"},".cm-matchingBracket, &:not(.cm-focused) .cm-selectionMatch":{backgroundColor:"transparent"},".cm-line":{padding:"0 2px 0 10px","&:first-child":{marginRight:"20px"}},".cm-activeLine":{backgroundColor:"inherit"},".cm-errorLine":{borderLeft:"solid ".concat(4,"px var(--red)"),marginLeft:"-".concat(4,"px")},".cm-gutter-lint":{width:"0px"},".cm-gutters":{borderRight:"none"},".cm-lint-marker-error":{position:"absolute",borderLeft:"solid ".concat(4,"px var(--red)"),height:"21px",marginTop:"-3px",marginLeft:"-7px",content:"''"},".cm-lint-marker-error:before":{content:"''"},".cm-lintPoint":{position:"absolute",marginTop:"13px",marginLeft:"-3px",content:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"';return'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(t,">").concat(encodeURIComponent(e),"</svg>')")}('<path d="M10 6L6 2 2 6" fill="none" stroke="red" />','fill="none" viewBox="0 0 12 8" width="16" height="16" stroke-width="1.5" stroke-linecap="round"')},".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",borderRadius:"var(--border-radius-2)",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-tooltip-hover":{backgroundColor:"var(--white)",border:"solid 1px var(--silver)",borderRadius:"var(--border-radius-2)",boxShadow:"var(--box-shadow-4)",color:"var(--dark-gray)",font:"var(--font-size-6) var(--sans-serif)"},".cm-matchingBracket, .cm-nonmatchingBracket":{color:"inherit"},".node-hover &":{borderRadius:"0 0.25rem 0.25rem 0"},".node-focus &, .node-readonly &":{borderRadius:(0,m.t)()?"0 0.25rem 0 0":"0 0.25rem 0.25rem 0"},".node-select &, .node-toolbar &":{borderRadius:"0 0 0.25rem 0.25rem"},".node-toolbar.node-focus &, .node-toolbar.node-hover &, .node-toolbar.node-readonly &":{borderRadius:"0 0 0.25rem 0"},".node-focus &, .node-select &":{backgroundColor:"var(--observable-focus-lightest-blue)"},".node-readonly &":{color:"var(--gray)"},".node-add &":{backgroundColor:"var(--washed-green)"},".node-assist &":{border:"solid 2px var(--light-purple)",borderRadius:"var(--border-radius-2)"},".cm-tooltip.cm-tooltip-autocomplete":{border:"none",background:"none",marginTop:"2px","& > ul":{backgroundColor:"var(--white)",border:"solid 1px var(--silver)",borderRadius:"var(--border-radius-2)",boxShadow:"var(--box-shadow-4)",color:"var(--dark-gray)",font:"var(--font-size-6) var(--sans-serif)",minWidth:"min(212px, 95vw)",maxHeight:"212px","& > li":{padding:"4px 6px",lineHeight:"24px"},"& > li[aria-selected]":{color:"var(--near-black)",backgroundColor:"var(--observable-focus-lightest-blue)"}}},".cm-completionDetail":{fontStyle:"normal",opacity:"1",color:"var(--gray)",float:"right"},".cm-completionMatchedText":{fontWeight:"bold",textDecoration:"none"},".cm-completionIcon":{width:"24px",position:"relative",marginRight:"4px",opacity:"1","&:after":{content:"''",position:"absolute",width:"24px",height:"24px",bottom:"-7px",left:"0px",borderRadius:"var(--border-radius-1)",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none'%3E%3Cstyle%3E.a%7Bfill:%23929292;%7D%3C/style%3E%3Cpath d='M16.9 17.1C16.3 17.7 15.5 18 14.6 18H13.5V16H14.6C15 16 15.3 15.8 15.5 15.7 15.6 15.5 15.7 15.3 15.7 15V14.5C15.7 14.2 15.7 13.8 16.1 13 16.5 12.4 17.3 12 17.3 12 17.3 12 16.5 11.7 16.1 11.1 15.7 10.3 15.7 9.8 15.7 9.5V9C15.7 8.7 15.6 8.5 15.5 8.3 15.3 8.2 15 8 14.6 8H13.5L13.5 6H14.6C15.5 6 16.3 6.3 16.9 6.9 17.5 7.5 17.7 8.3 17.7 9V9.5C17.7 9.7 17.7 10.1 17.9 10.5 18 10.6 18.1 10.7 18.2 10.8 18.4 10.9 18.6 11 19 11V13C18.6 13 18.4 13.1 18.2 13.2 18.1 13.3 18 13.4 17.9 13.5 17.7 13.9 17.7 14.3 17.7 14.5V15C17.7 15.7 17.5 16.5 16.9 17.1Z' class='a'/%3E%3Cpath d='M7.1 17.1C7.7 17.7 8.5 18 9.4 18H10.5V16H9.4C9 16 8.7 15.8 8.5 15.7 8.4 15.5 8.3 15.3 8.3 15V14.5C8.3 14.2 8.3 13.8 7.9 13 7.5 12.4 6.8 12 6.8 12 6.8 12 7.5 11.7 7.9 11.1 8.3 10.3 8.3 9.8 8.3 9.5V9C8.3 8.7 8.4 8.5 8.5 8.3 8.7 8.2 9 8 9.4 8H10.5L10.5 6H9.4C8.5 6 7.7 6.3 7.1 6.9 6.5 7.5 6.3 8.3 6.3 9V9.5C6.3 9.7 6.3 10.1 6.1 10.5 6 10.6 5.9 10.7 5.8 10.8 5.6 10.9 5.4 11 5 11V13C5.4 13 5.6 13.1 5.8 13.2 5.9 13.3 6 13.4 6.1 13.5 6.3 13.9 6.3 14.3 6.3 14.5V15C6.3 15.7 6.5 16.5 7.1 17.1Z' class='a'/%3E%3C/svg%3E \")",backgroundSize:"'cover'"}},".cm-snippetFieldPosition":{verticalAlign:"initial"},".cm-completionIcon-data":{"&:after":{backgroundImage:"url(\"data:image/svg+xml, %3csvg width='24' height='24' viewBox='-4 -4 24 24' fill='none' xmlns='http://www.w3.org/2000/svg' stroke-width='2' %3e%3cpath d='M7.19855 2.52175L7.88131 1.79111L7.19855 2.52175ZM12.6 11.7764L13.2581 11.0234L12.6 11.7764ZM5.34191 6.76078L11.9419 12.5293L13.2581 11.0234L6.65809 5.2549L5.34191 6.76078ZM10.8958 13.6864L3.35462 6.63385L1.98852 8.09459L9.52965 15.1472L10.8958 13.6864ZM6.51578 3.25238L13.8172 10.0755L15.1828 8.61419L7.88131 1.79111L6.51578 3.25238ZM3.08395 3.55474C3.91017 2.45311 5.50967 2.31219 6.51578 3.25238L7.88131 1.79111C6.0058 0.0384695 3.02413 0.301162 1.48395 2.35474L3.08395 3.55474ZM3.35462 6.63385C2.49183 5.82695 2.37516 4.49978 3.08395 3.55474L1.48395 2.35474C0.162683 4.11642 0.380169 6.59044 1.98852 8.09459L3.35462 6.63385ZM11.993 13.6551C11.6977 13.9647 11.2082 13.9786 10.8958 13.6864L9.52965 15.1472C10.6432 16.1886 12.3878 16.1388 13.4402 15.0356L11.993 13.6551ZM11.9419 12.5293C12.2764 12.8216 12.2996 13.3337 11.993 13.6551L13.4402 15.0356C14.5328 13.8903 14.4499 12.0651 13.2581 11.0234L11.9419 12.5293Z' fill='%23929292' /%3e%3c/svg%3e\")"}},".cm-completionIcon-snippet":{"&:after":{backgroundImage:"url(\"data:image/svg+xml,%0A%3Csvg width='24' height='24' viewBox='-4 -4 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13 3H3C2.44772 3 2 3.44772 2 4V12C2 12.5523 2.44772 13 3 13H13C13.5523 13 14 12.5523 14 12V4C14 3.44772 13.5523 3 13 3Z' stroke='%23929292' stroke-width='2' /%3E%3Crect x='4' y='9' width='2' height='2' rx='0.5' fill='%23929292' /%3E%3Crect x='7' y='5.5' width='2' height='5.5' rx='0.5' fill='%23929292' /%3E%3Crect x='10' y='7' width='2' height='4' rx='0.5' fill='%23929292' /%3E%3C/svg%3E%0A\")"}},".cm-completionIcon-reference, .cm-completionIcon-stdlib":{"&:after":{backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='-4 -4 24 24' fill='%23929292' fillRule='evenodd' clipRule='evenodd' %3E%3Cpath d='M3 1.75C2.30964 1.75 1.75 2.30964 1.75 3C1.75 3.69036 2.30964 4.25 3 4.25C3.69036 4.25 4.25 3.69036 4.25 3C4.25 2.30964 3.69036 1.75 3 1.75ZM0.25 3C0.25 1.48122 1.48122 0.25 3 0.25C4.51878 0.25 5.75 1.48122 5.75 3C5.75 4.51878 4.51878 5.75 3 5.75C1.48122 5.75 0.25 4.51878 0.25 3Z' /%3E%3Cpath d='M13 11.75C12.3096 11.75 11.75 12.3096 11.75 13C11.75 13.6904 12.3096 14.25 13 14.25C13.6904 14.25 14.25 13.6904 14.25 13C14.25 12.3096 13.6904 11.75 13 11.75ZM10.25 13C10.25 11.4812 11.4812 10.25 13 10.25C14.5188 10.25 15.75 11.4812 15.75 13C15.75 14.5188 14.5188 15.75 13 15.75C11.4812 15.75 10.25 14.5188 10.25 13Z' /%3E%3Cpath d='M10 12C9.44771 12 9 11.5523 9 11V5C9 3.34315 7.65685 2 6 2H5V4H6C6.55228 4 7 4.44772 7 5V11C7 12.6569 8.34315 14 10 14H11V12H10Z' /%3E%3C/svg%3E\")"}},".cm-completionIcon-text":{"&:after":{backgroundImage:"url(\"data:image/svg+xml,%0A%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.29552 11.1791C8.0027 11.1791 8.6196 10.8922 8.83526 10.4595H8.93557V11.1013H10.9417V7.38168C10.9417 6.18557 10.0239 5.5 8.41396 5.5C6.79398 5.5 5.76582 6.18071 5.6956 7.29902H7.51119C7.62654 7.04618 7.88233 6.92463 8.28858 6.92463C8.6848 6.92463 8.92554 7.09967 8.92554 7.38168V7.78524L7.81211 7.84845C6.31751 7.93111 5.5 8.51943 5.5 9.51619C5.5 10.5178 6.21721 11.1791 7.29552 11.1791ZM8.09799 9.83709C7.70679 9.83709 7.46103 9.65233 7.46103 9.36546C7.46103 9.09804 7.7118 8.923 8.14313 8.89382L8.92554 8.84034V9.16125C8.92554 9.5405 8.55941 9.83709 8.09799 9.83709Z' fill='%23929292'/%3E%3Cpath d='M16.2832 15.4043C17.6925 15.4043 18.5 14.3833 18.5 12.594C18.5 10.7901 17.7076 9.78361 16.2832 9.78361C15.5108 9.78361 14.924 10.1337 14.6632 10.7463H14.5629V7.84845H12.5066V15.3265H14.5127V14.4805H14.613C14.8588 15.064 15.4757 15.4043 16.2832 15.4043ZM15.4757 11.3201C16.0324 11.3201 16.3935 11.8209 16.3935 12.594C16.3935 13.3768 16.0374 13.8679 15.4757 13.8679C14.909 13.8679 14.5579 13.3816 14.5529 12.5988C14.5579 11.816 14.919 11.3201 15.4757 11.3201Z' fill='%23929292'/%3E%3Cpath d='M11.2878 15.0284C11.1925 13.5746 10.2396 12.7626 8.62461 12.7626C6.68363 12.7626 5.69559 13.7302 5.69559 15.6264C5.69559 17.5324 6.68363 18.5 8.62461 18.5C10.2045 18.5 11.1975 17.6734 11.2878 16.2828H9.42707C9.36689 16.7593 9.09606 17.0024 8.62461 17.0024C8.02275 17.0024 7.75192 16.5794 7.75192 15.6264C7.75192 14.6832 8.02275 14.2601 8.62461 14.2601C9.09606 14.2601 9.36689 14.5227 9.42707 15.0284H11.2878Z' fill='%23929292'/%3E%3C/svg%3E%0A\")"}},...(0,f.pK)("var(--observable-focus-dark-blue)")}),(0,k.yC)(),(0,a.ZO)(),(0,a.AE)(),(0,l.sW)(),(0,o.nF)(c.$d),a.tk.lineWrapping,(0,n.m8)(),(0,a.Uw)(),s.yy.allowMultipleSelections.of(!0),s.yy.tabSize.of(2),(0,o.nY)(),(0,o.n$)(),(0,a.Zs)(),s.yy.changeFilter.of(e=>e.changes.newLength<=65536),s.yy.transactionFilter.of(e=>{let t=[];if(e.changes.iterChanges((e,r,i,n,o)=>{let l=i;for(let e of o){let r=-1;for(;(r=e.indexOf("\x00",r+1))>=0;)t.push({from:l+r,to:l+r+1,insert:""});l+=e.length}}),t.length){let r=s.as.of(t,e.changes.newLength);return{...e,changes:e.changes.compose(r)}}return e}),(0,f.W$)(),(0,g.tU)(),(0,u.Cw)(),(0,j.kh)(),(0,v.vt)(),y.A,h.l,L.c,S.L7,S.UP,S.ss,a.tk.contentAttributes.of({"data-cy":"editor"}),s.yy.transactionExtender.of(function(e){let{effects:t,startState:r}=e,i=t.filter(e=>e.is(w.g)),n=[];if(i.length>0){let e=r.field(w.C),{mode:t,data:o}=i[i.length-1].value;if(t!==e){let e=P.qz[t];n=[A.modeExtensions.reconfigure(e.extensions({settings:r.field(M.i),data:o})),A.keymap.reconfigure([a.$f.of([...e.keymap,...D])])]}}return{effects:n}}),s.yy.transactionFilter.of(function(e){let{newDoc:t,startState:r}=e,i=r.field(w.C);if(e.isUserEvent("input.paste")&&"md"===i){let i="";return(e.changes.iterChanges((e,r,n,o)=>{i||(i=t.sliceString(n,o))}),isAbsoluteUrl(i))?r.changeByRange(e=>{let{from:t,to:n}=e,[o,l]=["](",")"],a=r.sliceDoc(t,n),c=(0,p.AB)(r,e,o,l),d=r.doc.sliceString(c.from,c.to),u=d.startsWith(o)&&d.endsWith(l),h=!a.length||u||isAbsoluteUrl(a)?i:"[".concat(a,"](").concat(i,")"),f=t+h.length;return{range:s.xm.fromJSON({anchor:f,head:f}),changes:{from:t,to:n,insert:h}}}):e}return e}),a.tk.updateListener.of(e=>{let{view:t,state:r,focusChanged:i}=e;(0,H.f)(t,()=>{let e=r.field(V.X),n=r.field(h.l);n&&(n({type:"edit",id:e,state:r}),t.hasFocus&&i&&n({type:"focus",id:e}))})}),function(){function maybeDrop(e,t,r){let i=r.state.field(h.l);if(!i||!t)return!1;let n=Array.prototype.filter.call(t.items,e=>"file"===e.kind);if(!n.length)return!1;let o=Array.prototype.some.call(t.items,e=>"text/plain"===e.type);if(o)return!1;let{fileUploadsOn:l,loginToUpload:s}=r.state.field(M.i);return l?(i({type:"attachLocalFiles",files:n.map(e=>e.getAsFile()),nodeId:r.state.field(V.X),nodeMode:r.state.field(w.C),source:"nodeEditor",trigger:"dragAndDrop"}),e.preventDefault(),!0):(s&&i({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"dragAndDrop",source:"nodeEditorDragAndDrop"}),!1)}return a.tk.domEventHandlers({drop:(e,t)=>!t.state.readOnly&&maybeDrop(e,e.dataTransfer,t),paste:(e,t)=>!t.state.readOnly&&maybeDrop(e,e.clipboardData,t)})}(),(0,_.p)(),(0,S.Tl)(),...Z]},12720:function(e,t,r){r.d(t,{C:function(){return o},_:function(){return n}});var i=r(28682);let[n,o]=(0,i.Z)([])},96265:function(e,t,r){r.d(t,{A:function(){return o}});var i=r(78120);let n=0,o=i.QQ.define({create:()=>n++,update:e=>e})},25227:function(e,t,r){r.d(t,{N:function(){return o},Z:function(){return n}});var i=r(28682);let[n,o]=(0,i.Z)(null)},51265:function(e,t,r){r.d(t,{W$:function(){return placeholder},pK:function(){return placeholderTheme},vT:function(){return u}});var i=r(78120),n=r(14456),o=r(31432),l=r(13961),s=r(88182),a=r(76355);let c="".concat((0,s._)("Alt-Backspace")," to delete this cell."),d=i.Py.define(),u=d.of(c);function defaultHint(e){let t=e.field(l.C),r=a.qz[t],i="tex"===t||"html"===t?"":" ".concat((0,s._)("Ctrl-space")," for more options."),n=r.convertible?" Arrow / to switch modes.":"";return"Type ".concat(r.label,", then ").concat((0,s._)("Shift-Enter"),".").concat(i).concat(n)}let p=i.QQ.define({create:e=>defaultHint(e),update(e,t){for(let r of((0,o.Z)(t.state)&&(e=defaultHint(t.state)),t.effects))r.is(d)&&(e=r.value);return e}});let PlaceholderWidget=class PlaceholderWidget extends n.l9{toDOM(){let e=document.createElement("div");return e.className="cm-placeholder",e.textContent=this.value,e}constructor(e){super(),this.value=e}};let h=n.lg.fromClass(class{update(e){((0,o.Z)(e.startState)!==(0,o.Z)(e.state)||e.startState.field(p)!==e.state.field(p))&&this.updateDeco(e.state)}updateDeco(e){this.placeholder=(0,o.Z)(e)?n.p.set(n.p.widget({widget:new PlaceholderWidget(e.field(p))}).range(0)):n.p.none}get decorations(){return this.placeholder}constructor(e){this.placeholder=n.p.none,this.updateDeco(e.state)}},{decorations:e=>e.decorations});function placeholderTheme(e){return{".cm-placeholder":{color:e,position:"absolute",fontFamily:"var(--sans-serif)",pointerEvents:"none",userSelect:"none",opacity:.6,overflowX:"hidden",whiteSpace:"nowrap",maxWidth:"95%","&::first-letter":{"text-transform":"uppercase"}}}}function placeholder(){return[p,h]}},7897:function(e,t,r){r.d(t,{K5:function(){return p},YE:function(){return a},j5:function(){return d},yC:function(){return search}});var i=r(14456),n=r(23939),o=r(28682);let l=i.tk.baseTheme({".cm-searchResult":{backgroundColor:"var(--observable-yellow)"},".cm-selectedSearchResult":{backgroundColor:"var(--observable-orange)"}}),[s,a]=(0,o.Z)(null),[c,d]=(0,o.Z)(null),[u,p]=(0,o.Z)(!1);function search(){return[l,s,c,u,m]}let h=i.p.mark({attributes:{class:"cm-searchResult"}}),f=i.p.mark({attributes:{class:"cm-selectedSearchResult"}}),m=i.lg.fromClass(class{update(e){let t=e.state.field(s),r=e.state.field(c),i=e.state.field(u);(e.viewportChanged||t!==this._previousSearchResults||r!==this._previousSelectedSearchResult||i!==this._previousSearchResultsVisible)&&(this._previousSearchResults=t,this._previousSelectedSearchResult=r,this._previousSearchResultsVisible=i,this.decorations=this.searchResultsDeco(e.view,t,r,i))}searchResultsDeco(e,t,r,o){if(!t||!o)return i.p.set([]);let l=e.state.field(n.X),s=[];for(let{from:i,to:n}of e.visibleRanges)for(let e=0;e<t.length;e++){let{pos:o,matchLength:a}=t[e];o>=i&&o<=n&&(r&&r.nodeId===l&&r.nodeResultIndex===e?s.push(f.range(o,o+a)):s.push(h.range(o,o+a)))}return i.p.set(s)}constructor(e){this.view=e,this._previousSearchResults=null,this._previousSelectedSearchResult=null,this._previousSearchResultsVisible=!1,this.decorations=this.searchResultsDeco(e,null,null,!1)}},{decorations:e=>e.decorations})},32341:function(e,t,r){r.d(t,{JN:function(){return s},Zt:function(){return getParticipantColor},_O:function(){return l},kh:function(){return selectionPresence},mQ:function(){return getParticipantColorName}});var i=r(78120),n=r(14456);let o=[["gold","translucent-gold"],["pink","translucent-pink"],["light-green","translucent-green"],["light-purple","translucent-purple"],["orange","translucent-orange"],["light-blue","translucent-blue"]];function getParticipantColorName(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(o[(e+1)%o.length][t?1:0])}function getParticipantColor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"var(--".concat(getParticipantColorName(e,t),")")}function selectionPresence(){return[s,a]}let l=i.Py.define(),s=i.QQ.define({create:()=>[],update(e,t){let{effects:r}=t;return 0===(r=r.filter(e=>e.is(l))).length?e:r.map(e=>e.value).filter(e=>e)}});let Cursor=class Cursor extends n.l9{toDOM(){var e;let t=document.createElement("span");return t.className="presence-widget",t.title=this.name,t.style.borderColor=getParticipantColor(this.order),t.style.setProperty("--presence-initials",'"'.concat((e=this.name,this.avatar?"":e.split(" ").filter(e=>e).map(e=>e.charAt(0).toUpperCase()).join("").substring(0,2)),'"')),function(e){if(!e)return!1;try{return new URL(e),!0}catch(e){return!1}}(this.avatar)&&t.style.setProperty("--presence-avatar",function(e){let t=new URL(e);return t.searchParams.set("s","60"),t.searchParams.set("format","jpeg"),"url(".concat(t,")")}(this.avatar)),t.style.setProperty("--presence-color",getParticipantColor(this.order)),t}constructor(e,t,r){super(),this.name=e,this.avatar=t,this.order=r}};let mark=e=>n.p.mark({attributes:{style:"background-color: ".concat(getParticipantColor(e,!0),";")}}),widget=(e,t,r)=>n.p.widget({widget:new Cursor(e,t,r)}),a=n.lg.fromClass(class{update(e){this.selectionsChanged(e)?this.decorations=this.decorationSet(e.state):this.decorations=this.decorations.map(e.changes)}selectionsChanged(e){return e.state.field(s)!==e.startState.field(s)}decorationSet(e){let t=e.field(s);return n.p.set(Array.from(this.getDecorations(t)),!0)}*getDecorations(e){for(let{selection:t,name:r,avatar:i,order:n}of e)for(let{head:e,empty:o,from:l,to:s}of t.ranges)yield widget(r,i,n).range(e),o||(yield mark(n).range(l,s))}constructor(e){this.view=e,this.decorations=this.decorationSet(e.state)}},{decorations:e=>e.decorations})},25993:function(e,t,r){r.d(t,{L7:function(){return d},LV:function(){return u},Tl:function(){return signatureHelp},UP:function(){return f},dF:function(){return m},ss:function(){return p},t2:function(){return dismissSignatureHelp},vo:function(){return h}});var i=r(78120),n=r(14456),o=r(74374),l=r(68092),s=r(23939),a=r(28682),c=r(83687);function dismissSignatureHelp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"implicit",r=e.state.field(s.X),i=e.state.field(d),n=e.state.field(p),o=e.state.field(l.l);return!!n&&!!o&&!i&&(o({type:"signatureHelpDismiss",id:r,source:t}),!0)}let[d,u]=(0,a.Z)(null),[p,h]=(0,a.Z)(!1),[f,m]=(0,a.Z)(null),x=i.QQ.define({create:getSignatureHelpTooltip,update(e,t){let{state:r,docChanged:i,selection:n,startState:o}=t;return i||n?getSignatureHelpTooltip(r,o):e},provide:e=>n.hJ.computeN([e],t=>t.field(e))});function getSignatureHelpTooltip(e,t){let r=e.field(c.c);if(!r||"js"!==(0,o.yq)(e))return[];let i=e.selection.ranges.filter(e=>e.empty);if(!i.length)return[];let n=i[i.length-1].from,a=null==t?void 0:t.doc.toString().charAt(n-1),d=e.doc.toString().charAt(n-1),u="("===d&&"("!==a,h=e.field(p),m=e.field(s.X),x=e.field(f);if(!x)return[];let g=document.createElement("div");return g.appendChild(x),g.setAttribute("class","cm-contextual-info cm-tooltip cm-tooltip-autocomplete"),r.getSignatureHelpItems(m,n,e.doc.toString()).then(t=>{let r=e.field(l.l);if(!t)return null==r?void 0:r({type:"signatureHelp",id:m});u||h?null==r||r({type:"signatureHelp",id:m,data:t}):null==r||r({type:"signatureHelp",id:m})}),[{pos:n,above:!0,create:()=>({dom:g,overlap:!0,offset:{x:0,y:4}})}]}function signatureHelp(){return[x]}},83687:function(e,t,r){r.d(t,{P:function(){return o},c:function(){return n}});var i=r(28682);let[n,o]=(0,i.Z)(null)},56564:function(e,t,r){r.d(t,{C:function(){return o},i:function(){return n}});var i=r(28682);let[n,o]=(0,i.Z)({prettierOn:!1,closeBracketsOn:!0,fileUploadsOn:!1,loginToUpload:!0,spellcheckOn:!1,defaultCellMode:void 0,vimKeys:!1})},39273:function(e,t,r){r.d(t,{R:function(){return n},W:function(){return loadVim}});var i=r(23939);let n={loaded:!1};function loadVim(e){return r.e(1972).then(r.bind(r,1226)).then(t=>{function blur(t){e({type:"blur",id:t.cm6.state.field(i.X)})}return Object.assign(n,{loaded:!0,...t}),t.Vim.defineEx("write","w",function(t){e({type:"commit",id:t.cm6.state.field(i.X),trigger:"keypress",source:"nodeEditor"})}),t.Vim.defineEx("quit","q",blur),t.Vim.defineEx("wq","wq",blur),t.Vim.defineEx("x","x",blur),t.Vim.map("ZZ",":x","normal"),n})}},10245:function(e,t,r){r.d(t,{z:function(){return maybeFormatAndCommit},p:function(){return nodeEditorKeymap}});var i=r(34790),n=r(45383),o=r(14456),l=r(68092),s=r(31432),a=r(13961),c=r(23939),d=r(51265),u=r(85623);function selectionAtStart(e){return 1===e.selection.ranges.length&&e.selection.ranges[0].empty&&0===e.selection.ranges[0].from}function selectionAtEnd(e){return 1===e.selection.ranges.length&&e.selection.ranges[0].empty&&e.selection.ranges[0].to===e.doc.length}var p=r(25993),h=r(56564),f=r(39273),m=r(67642),x=r(76355),g=r(14997);function action(e){return t=>{if(t.state.readOnly)return!1;let r=t.state.field(l.l);return!!r&&(r({type:e,id:t.state.field(c.X)}),!0)}}function escapeKey(e,t){if((0,p.t2)(e,"Escape")||(0,n.g3)(e)||f.R.loaded&&f.R.getCM(e)&&"Escape"===t)return!0;let r=e.state.field(l.l);return!!r&&(r({type:"selectionBlur"}),!0)}function nodeEditorKeymap(){return o.$f.of([{key:"Shift-Enter",run:maybeFormatAndCommit("keypress","nodeEditor")},{key:"Mod-s",run:maybeFormatAndCommit("keypress","nodeEditor")},{key:"Shift-Alt-f",run:e=>((0,i.Rn)(e),(0,g.Y)(e,!1),!0)},{key:"Mod-j",run(e){let t;let r=e.state.field(l.l);if(!r)return!1;let i=e.plugin(u.YV);if(!i)return!1;let n=e.state.selection.main;return i.decorations.between(n.from,n.to+1,(r,i)=>(t=e.state.doc.slice(r,i).toString(),!1)),!!t&&(r({type:"focusDefinition",name:t,id:e.state.field(c.X),trigger:"keypress",source:"Mod-j"}),!0)}},{key:"Shift-Mod-j",run(e){let t=e.state.field(l.l);return!!t&&(t({type:"focusUndo"}),!0)}},{key:"Backspace",run:e=>((0,s.Z)(e.state)&&e.dispatch({effects:[d.vT]}),!1)},{key:"Mod-Enter",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);if(!t)return!1;let{defaultCellMode:r}=e.state.field(h.i);return t(r?{type:"insertAfter",id:e.state.field(c.X),node:{mode:r},trigger:"keypress",source:"nodeEditor"}:{type:"openInsertMenu",id:e.state.field(c.X),before:!1,trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Shift-Mod-Enter",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);if(!t)return!1;let{defaultCellMode:r}=e.state.field(h.i);return t(r?{type:"insertBefore",id:e.state.field(c.X),node:{mode:r},trigger:"keypress",source:"nodeEditor"}:{type:"openInsertMenu",id:e.state.field(c.X),before:!0,trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Shift-Alt-Mod-Enter",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);if(!t)return!1;let{defaultCellMode:r}=e.state.field(h.i);return t(r?{type:"openInsertMenu",id:e.state.field(c.X),before:!0,trigger:"keypress",source:"nodeEditor"}:{type:"insertBefore",id:e.state.field(c.X),trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Alt-Mod-Enter",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);if(!t)return!1;let{defaultCellMode:r}=e.state.field(h.i);return t(r?{type:"openInsertMenu",id:e.state.field(c.X),before:!1,trigger:"keypress",source:"nodeEditor"}:{type:"insertAfter",id:e.state.field(c.X),trigger:"keypress",source:"nodeEditor"}),!0}},{key:"Shift-Alt-Enter",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);return!!t&&(t({type:"splitBefore",id:e.state.field(c.X),trigger:"keypress"}),!0)}},{key:"Alt-Enter",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);return!!t&&(t({type:"splitAfter",id:e.state.field(c.X),trigger:"keypress"}),!0)}},{key:"Alt-Backspace",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);return!!(t&&selectionAtStart(e.state))&&(t({type:"mergeBefore",id:e.state.field(c.X)}),!0)}},{key:"Ctrl-Alt-d",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);return!!(t&&selectionAtEnd(e.state))&&(t({type:"mergeAfter",id:e.state.field(c.X)}),!0)}},{key:"Mod-.",run:action("togglePin")},{key:"Mod-,",run:action("toggleDisplay")},{key:"Ctrl-Shift-p",run:action("togglePin")},{key:"Ctrl-Shift-ArrowDown",run:action("moveDown")},{key:"Ctrl-Shift-ArrowUp",run:action("moveUp")},{mac:"Cmd-Alt-ArrowDown",run:action("moveDown")},{mac:"Cmd-Alt-ArrowUp",run:action("moveUp")},{key:"Mod-Shift-Alt-ArrowDown",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);return!!t&&(t({type:"duplicate",id:e.state.field(c.X),before:!1}),!0)}},{key:"Mod-Shift-Alt-ArrowUp",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);return!!t&&(t({type:"duplicate",id:e.state.field(c.X),before:!0}),!0)}},{key:"Shift-Mod-u",run(e){if(e.state.readOnly)return!1;let t=e.state.field(l.l);if(!t)return!1;let{fileUploadsOn:r,loginToUpload:i}=e.state.field(h.i);if(!r)return i&&t({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"keypress",source:"fileUploadKeyboardShortcut"}),!0;let n={nodeId:e.state.field(c.X),nodeMode:e.state.field(a.C),trigger:"keypress"};return t({type:"notebookFilePickerOpened",source:"nodeEditor",...n}),(0,m.Z)().then(e=>{t({type:"attachLocalFiles",files:e,source:"nodeEditor",...n})}),!0}},{key:"Mod-Escape",run:e=>escapeKey(e,"Mod-Escape")},{key:"Escape",run:e=>escapeKey(e,"Escape")},{key:"Shift-Alt-ArrowDown",mac:"Alt-Tab",run(e){let t=e.state.field(l.l);return!!t&&(t({type:"focusAfter",id:e.state.field(c.X)}),!0)}},{key:"Shift-Alt-ArrowUp",mac:"Shift-Alt-Tab",run(e){let t=e.state.field(l.l);return!!t&&(t({type:"focusBefore",id:e.state.field(c.X)}),!0)}},{key:"Mod-ArrowDown",run(e){let t=e.state.field(l.l);return!!(t&&selectionAtEnd(e.state))&&(t({type:"focusAfter",id:e.state.field(c.X),selectStart:!0}),!0)}},{key:"Mod-ArrowUp",run(e){let t=e.state.field(l.l);return!!(t&&selectionAtStart(e.state))&&(t({type:"focusBefore",id:e.state.field(c.X),selectEnd:!0}),!0)}},{key:"ArrowDown",run:e=>!e.state.readOnly&&(0,s.Z)(e.state)&&x.qz[e.state.field(a.C)].convertible&&setMode(e,(e,t)=>Math.min(e+1,t-1))},{key:"ArrowUp",run:e=>!e.state.readOnly&&(0,s.Z)(e.state)&&x.qz[e.state.field(a.C)].convertible&&setMode(e,e=>Math.max(e-1,0))}])}function maybeFormatAndCommit(e,t){return r=>((0,i.Rn)(r),(0,i._B)(r),(0,p.t2)(r),r.state.field(h.i).prettierOn)?((0,g.Y)(r).then(()=>commit(r,e,t)),!0):commit(r,e,t)}function commit(e,t,r){let i=e.state.field(l.l);return!!i&&(i({type:"commit",id:e.state.field(c.X),trigger:t,source:r}),!0)}function setMode(e,t){let r=Object.entries(x.qz).filter(e=>{let[,{convertible:t}]=e;return t}).map(e=>{let[t]=e;return t}),i=e.state.field(a.C),n=r.findIndex(e=>e===i),o=r[t(n,r.length)],s=e.state.field(l.l);return!!s&&(s({type:"setMode",id:e.state.field(c.X),source:"cellMenu",trigger:"keypress",mode:o}),!0)}},35329:function(e,t,r){r.d(t,{Z:function(){return NodeEditors},f:function(){return runWhenSafe}});var i=r(14456),n=r(68092),o=r(96265),l=r(23939),s=r(25227),a=r(25993),c=r(83687),d=r(56770),u=r(29020);let p=new Set,h=[];function runWhenSafe(e,t){p.has(e)?h.push(t):t()}let NodeEditors=class NodeEditors{setState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this._isSettingState)throw this._isSettingState=!1,Error("Reentrant editor setState call");try{for(let[,e]of(this._isSettingState=!0,this._views))p.add(e);for(let[e,r]of function(e){let t=new Map;for(let r of e){let e=r.state.field(o.A);t.has(e)?t.get(e).push(r):t.set(e,[r])}return t}(t)){let t=this._views.get(e);t&&t.update(r)}for(let[,t]of(this._states=e.editorStates,this._views)){let e=t.state.field(l.X,!1);void 0!==e&&this._states.has(e)||this._disable(t)}if(this._focusId!==e.focusId){if(this._focusId=e.focusId,null!==this._focusId){let e=findViewById(this._states,this._views,this._focusId);e&&e.focus()}else if(document.activeElement instanceof HTMLElement){var r;document.activeElement.blur(),null===(r=window.getSelection())||void 0===r||r.removeAllRanges()}}else if(null!==this._focusId){for(let e of t)if(e.scrollIntoView&&e.state.field(l.X)===this._focusId){let t=this._views.get(e.state.field(o.A));t&&!t.hasFocus&&t.focus()}}if(this._selectedSearchResult!==e.selectedSearchResult){if(e.selectedSearchResult){let t=findViewById(this._states,this._views,e.selectedSearchResult.nodeId);if(t){let{nodeId:r,nodeResultIndex:i}=e.selectedSearchResult,{node:n}=t.domAtPos(e.searchResults.get(r)[i].pos);n instanceof HTMLElement&&(0,d.zT)(n),this._selectedSearchResult=e.selectedSearchResult}}else this._selectedSearchResult=void 0}let i=(0,u.cE)(e)?e.owner:null;if(this._privateOwner!==i){this._privateOwner=i;let e={effects:s.N.of(i)};for(let t of this._views.values())t.dispatch(e)}this._spotlight(e)}finally{for(let[,e]of(this._isSettingState=!1,this._views))p.delete(e);let e=h;for(let t of(h=[],e))t()}}attach(e,t,r){if(this._views.has(e))throw Error("Duplicate EditorView");let s=function(e,t){let r=f.get(e);if(!r){for(let[,t]of(r=new Map,e))r.set(t.field(o.A),t);f.set(e,r)}return r.get(t)}(this._states,e),u=new i.tk({state:s});if(u.viewState.printing=!0,t.insertBefore(u.dom,t.firstChild),this._views.set(e,u),s){var p;let e=s.field(l.X),t=e===this._focusId,i=e===(null===(p=this._spotlightPos)||void 0===p?void 0:p.node);if(this._tsClient||(this._tsClient=this.getTsClient()),u.dispatch({effects:[n.a.of(this.dispatch),c.P.of(this._tsClient),a.dF.of(r)],scrollIntoView:t}),t&&u.focus(),i){let{node:e}=u.domAtPos(this._spotlightPos.pos);e instanceof HTMLElement&&(0,d.zT)(e)}}}detach(e){var t;let r=this._views.get(e),i=null==r?void 0:r.state.field(l.X,!1);if(i&&(null===(t=this._tsClient)||void 0===t||t.deleteFile(i)),!r)throw Error("EditorView not found");this._disable(r),r.destroy(),this._views.delete(e)}_disable(e){e.dispatch({effects:[n.a.of(null)]})}refocus(){if(null===this._focusId)return!1;let e=findViewById(this._states,this._views,this._focusId);return!!e&&(e.hasFocus||e.focus(),e.inView||e.dispatch({scrollIntoView:!0}),!0)}scrollIntoView(e){let t=findViewById(this._states,this._views,e);return!!t&&(t.dispatch({scrollIntoView:!0}),!0)}repositionTooltips(e){let t=findViewById(this._states,this._views,e);t&&(0,i.E2)(t)}_spotlight(e){if(!e.spotlightParticipant){this._spotlightPos&&(this._spotlightPos=null);return}let t=e.participants.find(t=>t.id===e.spotlightParticipant);for(let e=0;e<t.node_ids.length;e++)if(null!==t.node_ids[e]){let r=t.node_ids[e],i=t.selections[e]?t.selections[e].ranges[t.selections[e].main].head:0;if(!this._spotlightPos||this._spotlightPos.node!==r||this._spotlightPos.pos!==i){this._spotlightPos={node:r,pos:i};let e=findViewById(this._states,this._views,r);if(e){let{node:t}=e.domAtPos(this._spotlightPos.pos);t instanceof HTMLElement&&(0,d.zT)(t)}}}}applyCommand(e,t){let r=this._views.get(e);if(!r)throw Error("EditorView not found");return!r.state.readOnly&&t(r)}constructor(e,t){this.dispatch=e,this.getTsClient=t,this._views=new Map,this._states=new Map,this._focusId=null,this._privateOwner=null,this._isSettingState=!1,this._spotlightPos=null,this._tsClient=null}};function findViewById(e,t,r){let i=e.get(r);return i&&t.get(i.field(o.A))}let f=new WeakMap},4640:function(e,t,r){r.d(t,{S:function(){return WorkerChannelTask},i:function(){return WorkerTask}});let WorkerTask=class WorkerTask{run(e){return this._promise||(this._promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),e({type:"workerTask",task:this})),this._promise}};let WorkerChannelTask=class WorkerChannelTask extends WorkerTask{process(e){let t;let r=[];function fulfilled(e){r.push({message:e}),t&&(t(),t=void 0)}function rejected(e){r.push({error:e}),t&&(t(),t=void 0)}return this.open(t=>e(t,fulfilled,rejected),()=>({[Symbol.asyncIterator](){return this},async next(){r.length||await new Promise(e=>t=e);let e=r.shift();if("error"in e)throw Error(e.error);return e.message}}))}constructor(e){super(),this.open=e}}},78756:function(e,t,r){r.d(t,{I:function(){return n},w:function(){return hasNonDisplayData}});var i=r(28174);function hasNonDisplayData(e){if(!e)return!1;for(let t in e)if("display"!==t)return!0;return!1}let n=(0,i.J)(()=>({type:"workerStatus",displayModes:new Map,statuses:new Map,suggestions:new Map,chartSpecs:new Map}))},40591:function(e,t,r){r.d(t,{$g:function(){return findNodeIndex},DY:function(){return findNode},o4:function(){return findNextNodeId},t$:function(){return findPreviousNodeId}});let i=new WeakMap;function findNode(e,t){return e.nodes[findNodeIndex(e,t)]}function findNodeIndex(e,t){let r=i.get(e.nodes);void 0===r&&(r=new Map(e.nodes.map((e,t)=>[e.id,t])),i.set(e.nodes,r));let n=r.get(t);return void 0===n?-1:n}function findNextNodeId(e,t){let r=findNodeIndex(e,t);return r<e.nodes.length-1?e.nodes[r+1].id:null}function findPreviousNodeId(e,t){let r=findNodeIndex(e,t);return r>0?e.nodes[r-1].id:null}},80400:function(e,t,r){r.d(t,{t:function(){return isMobile}});function isMobile(){if("undefined"==typeof navigator)return!1;if("maxTouchPoints"in navigator)return navigator.maxTouchPoints>0;if("function"==typeof window.matchMedia){let e=window.matchMedia("(pointer:coarse)");if("(pointer:coarse)"===e.media)return!!e.matches}return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Opera Mobi|Mobile|CriOS/i.test(navigator.userAgent)}},14997:function(e,t,r){r.d(t,{F:function(){return maybeFormatJavaScript},Y:function(){return maybeFormat}});var i=r(78120),n=r(84396),o=r(63230),l=r(13961);function parseCellForPrettier(e){let t=[],r=function visitNode(e,t){let r;if(Array.isArray(e))r=e.entries();else{if(!e||"object"!=typeof e||"string"!=typeof e.type)return e;r=Object.entries(e)}for(let[i,n]of r)e[i]=visitNode(n,t);return Array.isArray(e)?e:t(e)||e}(n.b3.parse(e,{onComment:t,onToken:[],ranges:!0}),e=>{if("ChainExpression"===e.type)return function transformChainExpression(e){return"CallExpression"===e.type?(e.type="OptionalCallExpression",e.callee=transformChainExpression(e.callee)):"MemberExpression"===e.type?(e.type="OptionalMemberExpression",e.object=transformChainExpression(e.object)):"TSNonNullExpression"===e.type&&(e.expression=transformChainExpression(e.expression)),e}(e.expression)}),{body:i,id:o}=r,l=i&&null!==i.id&&("FunctionExpression"===i.type||"ClassExpression"===i.type)&&i.id;return{type:"Program",body:[o&&o!==l?r:r.body],start:0,end:e.length,comments:t}}async function maybeFormat(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{let n=await r.e(3502).then(r.t.bind(r,98645,23)),s=await r.e(8592).then(r.t.bind(r,43341,23)),{state:a}=e,c=a.field(l.C),d=a.doc.toString(),u=a.selection.main,p=u.from!==u.to;if("js"===c){if(p){let{formatted:t,cursorOffset:r}=n.formatWithCursor(d,{trailingComma:"none",parser:"typescript",plugins:[{parsers:{typescript:{astFormat:"estree",locStart:e=>e.start,locEnd:e=>e.end,parse:e=>{let t=[];if(e!==d){let r=o._b.parse(e,{ecmaVersion:13,onComment:t,onToken:[],ranges:!0,allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,allowImportExportEverywhere:!0});return{...r,comments:t}}return parseCellForPrettier(e)}}}}],cursorOffset:u.to,rangeStart:u.from,rangeEnd:u.to}),l=i.jT.single(Math.min(u.from,t.length),Math.min(r,t.length));e.dispatch(a.update({changes:{from:0,to:d.length,insert:t},selection:l}))}else{let t=parseCellForPrettier(d),r=!t.body[0]||"ImportDeclaration"!==t.body[0].type,{formatted:o,cursorOffset:l}=n.formatWithCursor(d,{trailingComma:"none",semi:r,parser:()=>t,cursorOffset:u.to});o=o.trim();let s=i.jT.single(Math.max(0,Math.min(l,o.length)));e.dispatch(a.update({changes:{from:0,to:d.length,insert:o},selection:s}))}}else if("md"===c&&!t){let t=p?u.from:0,r=p?u.to:d.length,{formatted:o,cursorOffset:l}=n.formatWithCursor(d.slice(t,r),{parser:"markdown",cursorOffset:p?u.to-u.from:u.from,proseWrap:"always",plugins:[s]});e.dispatch(a.update({changes:{from:t,to:r,insert:o},selection:p?i.jT.single(u.from,u.from+l):i.jT.single(l)}));return}}catch(e){e instanceof SyntaxError||console.error("prettier failed",e)}}async function maybeFormatJavaScript(e){try{let t=await r.e(3502).then(r.t.bind(r,98645,23)),i=parseCellForPrettier(e);return t.format(e,{trailingComma:"none",parser:()=>i}).trim()}catch(t){return console.error("prettier failed to format text",t),e}}},61091:function(e,t,r){r.d(t,{Q:function(){return unusedName}});function unusedName(e,t){let r=e,i=0;for(;t.has(r);)r=e+String(++i);return r}},28174:function(e,t,r){r.d(t,{J:function(){return actionQueue}});function actionQueue(e){let t=new Map;return(r,i)=>{let n=t.get(r);n||(n=e(),t.set(r,n),requestAnimationFrame(()=>{t.delete(r),r(n)})),i(n)}}},82317:function(e,t,r){r.d(t,{N5:function(){return collectionsRequested},Yd:function(){return collectionsUpdated},_O:function(){return openCollectionsSidebar}});var i=r(5146),n=r(4530);let collectionsRequested=async(e,t,r)=>{let{notebook:o,currentUser:l}=e,{addTo:s,removeFrom:a,onDismiss:c}=t,{id:d}=o,u=await (0,i.Fv)("/collection/bulk",{actions:[...s.map(e=>({type:"add",collection_id:e.id,document_listing_id:d})),...a.map(e=>({type:"remove",collection_id:e.id,document_listing_id:d}))]}),p=Object.fromEntries([...s,...a].map(e=>[e.id,e])),h=!1;for(let e of u)e.ok?"add"===e.type?(0,n.MR)((0,n.y6)({type:"collection:manage:addNotebookListing",data:{addedListingId:d},collection:p[e.collection_id],currentUser:l,eventVersion:1})):(0,n.MR)((0,n.y6)({type:"collection:manage:removeNotebookListing",data:{removedListingId:d},collection:p[e.collection_id],currentUser:l,eventVersion:1})):h=!0;r({type:"collectionsUpdated",addedTo:s.filter(e=>u.some(t=>t.ok&&t.collection_id===e.id)),removedFrom:a.filter(e=>u.some(t=>t.ok&&t.collection_id===e.id)),orphaned:"collections"in o&&o.collections.length+s.length<=a.length}),h&&r({type:"showErrorToast",message:"Oops, collections update failed. Try again?",key:"collections"}),c(),r({type:"updatedNotebook"})},openCollectionsSidebar=(e,t)=>{let{collection:r}=t;return{initialCollection:r}},collectionsUpdated=(e,t)=>{let{addedTo:r,removedFrom:i}=t;return{collections:[...e.collections.filter(e=>!i.some(t=>t.id===e.id)),...r.filter(t=>!e.collections.some(e=>e.id===t.id))]}}},54588:function(e,t,r){r.d(t,{y:function(){return descriptionUpdate},z:function(){return descriptionUpdated}});var i=r(5146);let descriptionUpdate=async(e,t,r)=>{let{notebook:{id:n}}=e,{description:o,onDismiss:l}=t;try{let e=await (0,i.Fv)("/document/".concat(n,"/description"),{description:o});r({type:"descriptionUpdated",description:e.description})}catch(e){r({type:"showErrorToast",message:"Oops, setting notebook description failed. Try again?",key:"description"})}l()},descriptionUpdated=(e,t)=>{let{description:r}=t;return{description:r}}},72776:function(e,t,r){r.d(t,{AV:function(){return initialEditorStates},F2:function(){return toUpdate},GD:function(){return byNode},Hp:function(){return setInitialEditorStates},R9:function(){return receiveEdits},Sf:function(){return maybeScrollIntoView},l8:function(){return createEditorState},qk:function(){return updateReadOnly}});var i=r(78120),n=r(14456),o=r(67064),l=r(49122),s=r(93156),a=r(32986),c=r(12720),d=r(13961),u=r(23939),p=r(25227),h=r(56564),f=r(39273),m=r(7595),x=r(76355),g=r(63302),y=r(32980),C=r(29020);function toUpdate(e){return{changes:i.as.of(e.changes,e.length)}}function createEditorState(e,t,r,o,l){let{id:s,value:m,mode:g,data:y}=e,w=x.qz[g];return i.yy.create({extensions:[d.C.init(()=>g),a.Hk.vimKeys.of(t.vimKeys&&f.R.loaded?i.Wl.highest(f.R.vim()):[]),...a.Xl,u.X.init(()=>s),h.i.init(()=>t),a.Hk.modeExtensions.of(w.extensions({settings:t,data:y})),c._.init(()=>(0,C.Pu)(r).map(e=>e.name)),p.Z.init(()=>o),a.Hk.keymap.of(n.$f.of([...w.keymap,...a.Bt])),a.Hk.closeBrackets.of(t.closeBracketsOn?a._g:[]),a.Hk.readOnly.of(i.yy.readOnly.of(l)),a.Hk.sql.of([])],doc:m})}function setInitialEditorStates(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.editorStates=initialEditorStates(e,t),r.length>0&&function(e,t){let{editorStates:r}=receiveEdits(e,t);if(e.saveVersion<=g.Lr&&(0,y.mG)(e)){let t=e.model.nodes[0],n=r.get(t.id).doc,l="md"===t.mode&&"# Untitled"===n.toString()?i.jT.single(2,10):"js"===t.mode&&"md`# Untitled`"===n.toString()?i.jT.single(5,13):null;l&&({editorStates:r}=(0,o.N)({editorStates:r},{selection:l},t.id))}e.editorStates=r}(e,r)}function receiveEdits(e,t){let{editorStates:r,transactions:i}=e;for(let e=0;e<t.length;e++){let{node_id:n,value:l}=t[e];if(r.has(n)){let a=(0,s.cK)(r.get(n),[l]);if(a.changes.empty){t.splice(e--,1);continue}({transactions:i,editorStates:r}=(0,o.N)({transactions:i,editorStates:r},a,n))}}return{editorStates:r,transactions:i}}function initialEditorStates(e,t){let r;let{model:{nodes:i},owner:n,files:o}=e,s=(0,C.cE)(e)?n:null,a={prettierOn:(0,C.wW)(t,n),closeBracketsOn:(0,C.CD)(t),fileUploadsOn:(0,y.Yb)(t)&&(0,m.j5)(t,e),loginToUpload:!t,spellcheckOn:(0,C.OA)(t),defaultCellMode:(0,C.Sx)(t),vimKeys:(0,C.S1)(t)},c=new Map(i.map(t=>[t.id,createEditorState(t,a,o,s,(0,C.os)(e))]));return{editorStates:c,transactions:r}=(0,l.C)({editorStates:c,transactions:r},i),c}function byNode(e){let t=new Map;for(let{node_id:r,...i}of e)t.has(r)?t.get(r).push(i):t.set(r,[i]);return t}function maybeScrollIntoView(e,t,r){return null===r?t:{...t,...(0,o.N)(e,{scrollIntoView:!0},r)}}function updateReadOnly(e,t){let r={effects:[a.Hk.readOnly.reconfigure(i.yy.readOnly.of(t))]},{editorStates:n,transactions:l}=e;for(let[t]of e.editorStates)({editorStates:n,transactions:l}=(0,o.N)({editorStates:n,transactions:l},r,t));return{editorStates:n,transactions:l}}},9039:function(e,t,r){r.d(t,{Mq:function(){return attachLocalFilesListener},Nz:function(){return copyFileCode},R$:function(){return fileDeleteSucceeded},GC:function(){return fileMarkedForDeletion},YJ:function(){return fileReplaced},uu:function(){return initialFiles},pB:function(){return insertFile},b1:function(){return localFileUploadSucceeded},QT:function(){return localFilesAttached},zJ:function(){return remoteFileUpdated},bC:function(){return replaceFileListener},Nw:function(){return sanitize},Tw:function(){return unique}});var i=r(78120),n=r(42866),o=r(67064),l=r(49122),s=r(22971),a=r(77097),c=r(74374),d=r(12720),u=r(40591),p=r(79998),h=r(64709),f=r(61091);let m=new Set("do if in for let new try var case else enum eval null this true void with await \n  break catch class const false super throw while yield delete export import public \n  return static switch typeof default extends finally package private continue \n  debugger function arguments interface protected implements instanceof\n  undefined NaN Infinity\n  ".split(/\s+/));function identifierify(e,t){if(t){let t=e.split(".");e=t.slice(0,t.length-1).join("-")}return(0,f.Q)((0,h.O)(e).replace(/^[0-9-]+/g,"").replace(/-([_a-z0-9])/g,(e,t)=>t.toUpperCase())||"untitled",m)}var x=r(76355),g=r(63302),y=r(41312),C=r(29020);function fileOf(e){let{status:t,name:r,create_time:i,url:n,download_url:o,size:l,mime_type:s,private_bucket_id:a}=e,c=new Date(i);switch(t){case"pending":return{status:"pending",name:r,createTime:c,mimeType:s,privateBucketId:a};case"deleted":return{status:"deleted",name:r,createTime:c,mimeType:s,privateBucketId:a};case"private":return{status:"private",name:r,createTime:c,url:n,downloadUrl:o,size:l,mimeType:s,privateBucketId:a};case"public":return{status:"public",name:r,createTime:c,url:n,downloadUrl:o,size:l,mimeType:s,privateBucketId:a}}}function initialFiles(e){return new Map(e.map(e=>[e.name,fileOf(e)]))}let remoteFileUpdated=(e,t)=>{let{editorStates:r,files:i}=e,{file:n,ownUpload:o}=t;i=new Map(i);let l=fileOf(n),{name:s}=l,a=i.get(s);if((null==a?void 0:a.status)!=="local"||o)(null==a?void 0:a.blob)!==void 0&&(l.blob=a.blob);else{let e=unique(i,s);i.set(e,a),console.warn("renamed ".concat(s,"  ").concat(e))}i.set(s,l);let{editorStates:c,transactions:d}=updateFilesStateField(r,[],i);return{files:i,editorStates:c,transactions:d}};function updateFilesStateField(e,t,r){let i=e,n=(0,C.Pu)(r).map(e=>e.name);for(let[r]of e)({editorStates:i,transactions:t}=(0,o.N)({editorStates:i,transactions:t},{effects:d.C.of(n)},r));return{editorStates:i,transactions:t}}let localFilesAttached=(e,t)=>{let{files:r}=t;if(!r.length)return;let n=new Map(e.files),a=[];for(let e of r){let t=unique(n,sanitize(e.name)),r={name:t,createTime:new Date,mimeType:e.type,status:"local",blob:e,size:e.size};n.set(t,r),a.push(r)}let{beforeId:d}=t;if(void 0!==d)return{files:n,...updateFilesStateField(e.editorStates,[],n),...(0,s.cZ)(e,{id:d,before:!0,nodes:a.flatMap(t=>assignedFileNodes(t.name,t.mimeType,e.model.nodes)),type:"insertAll"})};let{nodeId:u}=t;if(void 0===u)return{files:n,...updateFilesStateField(e.editorStates,[],n)};let p=e.editorStates.get(u),h=p.changeByRange(t=>{var r;let n=p.doc.length||"js"!==(0,c.yq)(p,t)?a.map(e=>fileSnippet(e.name,e.mimeType,(0,c.yq)(p,t))).join(", "):a.length>1?(r=e.model.nodes,"".concat((0,f.Q)("data",(0,l.e)(r))," = Promise.all([\n  ").concat(a.map(e=>fileSnippet(e.name,e.mimeType)).join(",\n  "),"\n])")):assignedFileSnippet(a[0].name,a[0].mimeType,e.model.nodes);return{changes:{from:t.from,to:t.to,insert:n},range:i.jT.cursor(t.from+n.length)}}),{editorStates:m}=e,x=[];return{editorStates:m,transactions:x}=(0,o.N)(e,h,u),{editorStates:m,transactions:x}=updateFilesStateField(m,x,n),{files:n,editorStates:m,transactions:x}},attachLocalFilesListener=async(e,t,r)=>{let i=t.files.filter(e=>e.size>g.D_?(r({type:"showErrorToast",message:"Could not upload ".concat(e.name,": file exceeds the ").concat((0,p.BU)(g.D_)," limit."),key:"upload:".concat(e.name)}),!1):0!==e.size||(r({type:"showErrorToast",message:"Could not upload ".concat(e.name,": empty file.")}),!1));r({...t,type:"localFilesAttached",files:await Promise.all(i.map(resolveFile))})};async function resolveFile(e){if(!e.type){let t=await new Promise((t,r)=>{let i=new FileReader;i.onload=()=>t(i.result),i.onerror=r,i.readAsText(e.slice(0,16))});if("SQLite format 3\x00"===t)return new File([e],e.name,{type:"application/x-sqlite3"})}return e}let replaceFileListener=async(e,t,r)=>{let{fileToAttach:i,fileToReplace:n}=t;r({type:"fileReplaced",fileToAttach:await resolveFile(i),fileToReplace:n})},fileReplaced=(e,t)=>{let{fileToAttach:r,fileToReplace:i}=t,l=new Map(e.files),s=unique(l,sanitize(r.name));l.set(s,{name:s,createTime:new Date,mimeType:r.type,status:"local",blob:r,size:r.size});let{editorStates:a}=e,c=[];({editorStates:a,transactions:c}=updateFilesStateField(a,c,l));let d=new Map;for(let[t,r]of e.editorStates){let n=(0,u.DY)(e.model,t);if(n.value){let e=(0,y.Qc)({...n,value:r.doc.toString()}),o=i.name;e.fileAttachments.has(o)&&d.set(t,e.fileAttachments.get(o))}}let p=[];for(let[e,t]of d)({editorStates:a,transactions:c}=(0,o.N)({editorStates:a,transactions:c},{changes:t.map(e=>{let{start:t,end:r}=e;return{from:t,to:r,insert:'"'.concat(s,'"')}})},e)),p.push({type:"modify_node",node_id:e,new_node_value:a.get(e).doc.toString()});for(let t of e.model.nodes)if((0,x.sO)(t)){let e=t.data.source;"FileAttachment"===e.type&&e.name===i.name&&p.push({type:"modify_data",node_id:t.id,new_node_data:{...t.data,source:{...e,name:s}}})}return{files:l,...(0,n.v)({...e,files:l,editorStates:a,transactions:c},p)}},localFileUploadSucceeded=(e,t)=>{let{files:r}=e,{name:i}=t,n=r.get(i);if("local"===n.status)return(r=new Map(r)).set(i,{...n,status:"pending"}),{files:r}},fileMarkedForDeletion=(e,t)=>{let{files:r,editorStates:i}=e,{name:n}=t,o=r.get(n);(r=new Map(r)).set(n,{...o,status:"local"===o.status?"deleted":"deletepending"});let{editorStates:l,transactions:s}=updateFilesStateField(i,[],r);return{files:r,editorStates:l,transactions:s}},fileDeleteSucceeded=(e,t)=>{let{files:r}=e,{name:i}=t,n=r.get(i);if("deletepending"===n.status)return(r=new Map(r)).set(i,{...n,status:"deleted"}),{files:r}},insertFile=(e,t)=>{let{file:r}=t,{focusId:i,model:n}=e,o=null!==i?i:n.nodes[n.nodes.length-1].id;return(0,s.cZ)(e,{id:o,before:!1,nodes:assignedFileNodes(r.name,r.mimeType,e.model.nodes),type:"insertAll"})},copyFileCode=async(e,t,r)=>{let{file:i}=t;await navigator.clipboard.writeText(fileSnippet(i.name,i.mimeType)),r({type:"showSuccessToast",message:"Copied to clipboard"})};function unique(e,t){for(;e.has(t);)t=t.replace(/(?:@(\d+))?(?=\.|$)/,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"@".concat(+t+1)});return t}function sanitize(e){return e.replace(/[\\"'`${}@\x00-\x09\x0b-\x19]+/g,"-")}function assignedFileNodes(e,t,r){switch(t){case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{let i=[];i.push({mode:"js",value:'FileAttachment("'.concat(e,'")').concat(fileAccessor(t))});let n=(0,f.Q)("workbook",(0,l.e)(r)),o=(0,f.Q)("data",(0,l.e)(r));return i[0]={mode:"js",value:"".concat(n," = ").concat(i[0].value)},i.push({mode:"js",value:"".concat(n,".sheetNames")},{mode:"js",value:"".concat(o," = ").concat(n,'.sheet(0, {\n    headers: false,\n    // range: "A1:J10"\n  })')},{mode:"table",data:{source:{type:"cell",name:o},operations:{...x.Zu.defaultNode.data.operations,from:{table:(0,a.Z)({type:"cell",name:o,dialect:"array"})}}}}),i}case"text/csv":case"text/tab-separated-values":return[{mode:"table",name:(0,f.Q)(identifierify(e,!0),(0,l.e)(r)),data:{source:{type:"FileAttachment",name:e},operations:{...x.Zu.defaultNode.data.operations,from:{table:(0,a.Z)({type:"FileAttachment",name:e,dialect:"csv"})}}}}];case"application/x-sqlite3":return[{mode:"sql",name:"",data:{source:{type:"FileAttachment",name:e}}}];default:return[{mode:"js",value:assignedFileSnippet(e,t,r)}]}}function assignedFileSnippet(e,t,r){return"".concat((0,f.Q)(identifierify(e,!0),(0,l.e)(r))," = ").concat(fileSnippet(e,t))}function fileSnippet(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"js",i="FileAttachment(".concat(JSON.stringify(e),")");return"md"===r?"".concat(isImage(t)?"!":"","[").concat(e,"](${await ").concat(i,".url()})"):"html"===r?isImage(t)?'<img alt="'.concat(e,'" src="${await ').concat(i,'.url()}">'):'<a href="${await '.concat(i,'.url()}">').concat(e,"</a>"):"".concat(i).concat(fileAccessor(t))}function isImage(e){return null==e?void 0:e.startsWith("image/")}function fileAccessor(e){if(isImage(e))return".image()";switch(e){case"application/json":case"application/geo+json":return".json()";case"application/x-sqlite3":return".sqlite()";case"application/zip":return".zip()";case"text/csv":return".csv()";case"text/plain":return".text()";case"text/tab-separated-values":return".tsv()";case"application/xml":return".xml()";case"text/html":return".html()";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return".xlsx()";default:return""}}},93105:function(e,t,r){r.d(t,{yv:function(){return focus_blur},SS:function(){return closeInsertMenu},T_:function(){return focus_focus},ib:function(){return focusAfter},ug:function(){return focusBefore},I$:function(){return focusDefinition},z1:function(){return focusError},s0:function(){return focusFirst},vG:function(){return focusLast},zq:function(){return focusUndo},N5:function(){return maybeBlur},cn:function(){return maybeImplicitCommit},L4:function(){return openInsertMenu},VH:function(){return refocus},Aq:function(){return updateFocus},$c:function(){return updateFocusAndSelection},mX:function(){return updateFocusStack}});var i=r(78120),n=r(42866),o=r(67064),l=r(16755),s=r(54687),a=r(78756),c=r(40591),d=r(41312);function maybeImplicitCommit(e){let{focusId:t,model:r,participants:i,editorStates:n}=e;if(null===t||i.some(e=>e.node_ids.includes(t)))return;let o=n.get(t);if(!o)return;let l=o.doc.toString(),{data:s,value:d}=(0,c.DY)(r,t);return!(0,a.w)(s)&&/^\s*$/.test(l)&&r.nodes.length>1?{type:"remove_node",node_id:t}:l!==d?{type:"modify_node",new_node_value:l,node_id:t}:void 0}function updateFocusStack(e,t){if(null!==t){let r=e.length;e[r-1]!==t&&(e=(r<100?e:e.slice(100-r+1)).concat(t))}return e}function updateFocus(e,t,r){if(e.focusId!==t)return updateFocusAndSelection(e,t,r)}function updateFocusAndSelection(e,t,r){let i=(0,o.N)(e,{scrollIntoView:!0,selection:r},t),n=(0,l.Hr)({...e,...i},e.focusId);return{...e.assistFocusId?{assistFocusId:t}:void 0,focusId:t,focusStack:updateFocusStack(e.focusStack,t),selectionFocusId:null,selection:new Set,insertingId:void 0,...i,...n}}function updateFocusAndCommit(e,t,r){if(e.focusId===t)return;let i=maybeImplicitCommit(e),o=i&&(0,n.v)(e,[i]);return{...o,...updateFocus({...e,...o},t,r)}}function refocus(e){return null!==e.focusId?(0,o.N)(e,{scrollIntoView:!0},e.focusId):void 0}let focus_focus=(e,t)=>{let{id:r}=t;return updateFocusAndCommit(e,r)},focus_blur=(e,t)=>{let{id:r=e.focusId}=t;if(e.focusId===r)return maybeBlur(e)};function maybeBlur(e){if(null===e.focusId)return;let t=maybeImplicitCommit(e),r=(0,l.Hr)(e,e.focusId);return{...t&&(0,n.v)({...e,...r},[t]),...r,focusId:null,assistFocusId:null}}let focusAfter=(e,t)=>{let{id:r,selectStart:n}=t,{model:o,model:{nodes:l}}=e,s=(0,c.$g)(o,r);if(s>l.length-2)return;let a=l[s+1].id;return updateFocusAndCommit(e,a,n?i.jT.single(0):void 0)},focusBefore=(e,t)=>{let{id:r,selectEnd:n}=t,{editorStates:o,model:l,model:{nodes:s}}=e,a=(0,c.$g)(l,r);if(a<1)return;let d=s[a-1].id;return updateFocusAndCommit(e,d,n?i.jT.single(o.get(d).doc.length):void 0)},focusFirst=e=>{let{model:{nodes:t},focusId:r,focusStack:i}=e,n=null!==r?r:i.length?i[i.length-1]:t[0].id;return updateFocusAndCommit(e,n)},focusLast=e=>{let{model:{nodes:t},focusId:r,focusStack:i}=e,n=null!==r?r:i.length?i[i.length-1]:t[t.length-1].id;return updateFocusAndCommit(e,n)},focusUndo=e=>{let{focusStack:t}=e,r=t.length;if(r>1)return{...updateFocusAndCommit(e,t[r-2]),focusStack:t.slice(0,-1)}},focusDefinition=(e,t)=>{let{name:r}=t;r=r.trim().replace(/\s+/g," ");let i=e.model.nodes.find(e=>(0,d.WN)(e).includes(r));if(void 0!==i)return updateFocusAndCommit(e,i.id)},focusError=(e,t)=>{let{id:r}=t,{editorStates:n}=e,o=n.get(r),{jumpToError:l}=o.field(s.ei).find(e=>{let{jumpToError:t}=e;return t})||{};if(!l||!n.has(l.id))return;let a=i.jT.single(Math.min(l.position,n.get(l.id).doc.length-1));return e.focusId===l.id?updateFocusAndSelection(e,l.id,a):updateFocusAndCommit(e,l.id,a)},openInsertMenu=(e,t)=>{let{id:r,before:i}=t,{model:n}=e,o={insertingId:i?r:null===r?n.nodes[0].id:(0,c.o4)(n,r)},l=maybeBlur({...e,...o});return i&&(null==l?void 0:l.model)&&null!==r&&null!==o.insertingId&&!(0,c.DY)(l.model,o.insertingId)&&(o.insertingId=(0,c.o4)(n,r)),{selectionFocusId:null,selection:new Set,...o,...l}},closeInsertMenu=()=>({insertingId:void 0})},22971:function(e,t,r){r.d(t,{$T:function(){return insert},A1:function(){return moveUp},BE:function(){return insertAfter},Od:function(){return remove},TN:function(){return title},Vt:function(){return insertBefore},XM:function(){return relicense},aB:function(){return togglePin},cZ:function(){return insertAll},kT:function(){return initialModel},th:function(){return commit},vi:function(){return moveDown}});var i=r(78120),n=r(63999),o=r(42866),l=r(67064),s=r(72776),a=r(93105),c=r(40591),d=r(76355);function initialModel(e){let t=n.Z.of(e);return t.history=[],t}let title=(e,t)=>{let{value:r}=t;return(0,o.v)(e,[{type:"modify_title",new_node_value:r}])},commit=(e,t)=>{let{id:r}=t,i={type:"modify_node",node_id:r,new_node_value:e.editorStates.get(r).doc.toString()},{model:l,...s}=(0,o.v)(e,[i]);return l===e.model&&((l=new n.Z(e.model)).history=e.model.history.concat({...i,version:e.model.version})),{...s,model:l,...void 0===e.notificationMode&&{notificationMode:"allow"}}},insertAll=(e,t)=>{let{id:r,before:n,nodes:l}=t;if(!(l.length>0))throw Error("must insert at least one node");let{model:s}=e,u=n?r:null===r?s.nodes[0].id:(0,c.o4)(s,r),p=l[l.length-1],h=l.map(e=>{let{mode:t="js",value:r=d.qz[t].defaultNode.value,name:i=d.qz[t].defaultNode.name,pinned:n=d.qz[t].defaultNode.pinned,data:o=d.qz[t].defaultNode.data}=e;return{type:"insert_node",new_next_node_id:u,new_node_name:i,new_node_pinned:n,new_node_value:r,new_node_mode:t,new_node_data:o}}),f=(0,a.cn)(e);f&&h.push(f);let m=(0,o.v)(e,h),x=s.events.length+l.length-1;return{...m,...(0,a.Aq)({...e,...m},x,p.value?i.jT.single(p.value.length):void 0)}},insert=(e,t)=>{let{id:r,before:i,node:n={}}=t;return insertAll(e,{type:"insertAll",id:r,before:i,nodes:[n]})},insertAfter=(e,t)=>{let{id:r,node:i}=t;return insert(e,{id:r,before:!1,node:i,type:"insert"})},insertBefore=(e,t)=>{let{id:r,node:i}=t;return insert(e,{id:r,before:!0,node:i,type:"insert"})},remove=(e,t)=>{let{id:r,focusAfter:i,focusBefore:n}=t,{nodes:s}=e.model;if(s.length>1){let t=(0,o.v)(e,[{type:"remove_node",node_id:r}]);if(i||n){let n=(0,c.$g)(e.model,r)+(i?1:-1);t={...t,focusId:s[Math.max(0,Math.min(s.length,n))].id}}return e.assistFocusId===r&&(t={...t,assistFocusId:null}),t}{let t={changes:{from:0,to:e.editorStates.get(r).doc.length,insert:""}},{transactions:i,editorStates:n}=(0,l.N)(e,t,r),s=n.get(r);return(0,o.v)({...e,transactions:i,editorStates:n},[{type:"modify_node",node_id:r,new_node_value:s.doc.toString()}])}},togglePin=(e,t)=>{let{id:r}=t,i=(0,c.DY)(e.model,r).pinned;return(0,o.v)(e,[{type:i?"unpin_node":"pin_node",node_id:r}])},moveDown=(e,t)=>{let{id:r}=t,{nodes:i}=e.model,n=(0,c.$g)(e.model,r);if(n!==i.length-1)return(0,s.Sf)(e,(0,o.v)(e,[{type:"move_node",node_id:r,new_next_node_id:n<i.length-2?i[n+2].id:null}]),r)},moveUp=(e,t)=>{let{id:r}=t,{nodes:i}=e.model,n=(0,c.$g)(e.model,r);if(0!==n)return(0,s.Sf)(e,(0,o.v)(e,[{type:"move_node",node_id:r,new_next_node_id:i[n-1].id}]),r)},relicense=(e,t)=>{let{copyright:r,license:i}=t,{model:n}=e,l=[];if(n.copyright!==r&&l.push({type:"modify_copyright",new_node_value:r}),n.license!==i&&l.push({type:"modify_license",new_node_value:i}),l.length)return(0,o.v)(e,l)}},77097:function(e,t,r){r.d(t,{Z:function(){return getSourceTable},j:function(){return setDataSource}});var i=r(7026),n=r(42866),o=r(67064),l=r(93105),s=r(40591),a=r(76355);let setDataSource=(e,t)=>{let{id:r,source:i}=t,c=(0,s.DY)(e.model,r);if(!c)return;let d=[],u=e.editorStates.get(r).doc.toString();c.value!==u&&d.push({type:"modify_node",node_id:r,new_node_value:u}),d.push({type:"modify_data",node_id:r,new_node_data:{...c.data,source:i,..."table"===c.mode?{operations:{...a.Zu.defaultNode.data.operations,from:{table:getSourceTable(i)}}}:"chart"===c.mode?{config:c.data.config}:null}});let p=(0,n.v)(e,d);return e={...e,...p},p={...p,...(0,l.Aq)(e,r)},e={...e,...p},p={...p,...(0,o.N)(e,{scrollIntoView:!0},r)}};function getSourceTable(e){if(!(0,i.yD)(e.dialect))return null;switch(e.type){case"cell":return e.name;case"FileAttachment":return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"");default:return null}}},16755:function(e,t,r){r.d(t,{Hr:function(){return maybeDismissSignatureHelp},M9:function(){return signatureHelpReducer},hg:function(){return signatureHelpDismissReducer}});var i=r(67064),n=r(25993),o=r(40591);let signatureHelpReducer=(e,t)=>{var r;let{model:l,signatureHelpDismissedSpan:s,editorStates:a,transactions:c}=e,{id:d,data:u}=t,p=(0,o.DY)(l,d),h=null==u?void 0:null===(r=u.applicableSpan)||void 0===r?void 0:r.start;if(p&&(!h||h!==s))return{signatureHelpData:u,signatureHelpNodeId:d,signatureHelpDismissedSpan:null,...(0,i.N)({editorStates:a,transactions:c},{effects:[n.LV.of(null),n.vo.of(void 0!==h)]},d)}},signatureHelpDismissReducer=(e,t)=>{let{id:r}=t,i=(0,o.DY)(e.model,r);if(i)return maybeDismissSignatureHelp(e,r)};function maybeDismissSignatureHelp(e,t){var r;let{editorStates:o,signatureHelpData:l,transactions:s}=e;if(null==t||!l)return;let a=(null===(r=l.applicableSpan)||void 0===r?void 0:r.start)||null;return{signatureHelpData:void 0,signatureHelpDismissedSpan:a,...(0,i.N)({editorStates:o,transactions:s},{effects:[n.LV.of(a),n.vo.of(!1)]},t)}}},42866:function(e,t,r){r.d(t,{v:function(){return applyModel}});var i=r(72776),n=r(67064),o=r(49092),l=r(49122),s=r(62029),a=r(93156),c=r(13961),d=r(40591),u=r(29020),p=r(15864);function applyModel(e,t){if(t.some(e=>"revert"===e.type))throw Error("Revert could not be processed.");let r=[],h=new Set,f=new Set,m=new Set,x=e.model.apply(t,e=>{(0,o.v)(e,r),(0,o.O)(e,{inserts:h,removes:f,modes:m})});if(!r.length)return{model:e.model,transactions:e.transactions,editorStates:e.editorStates};x.history=e.model.history.concat(r);let g=x.events.slice(e.model.version+1).filter(e=>"modify_node"===e.type||"mode_node"===e.type);if(!h.size&&!f.size&&!m.size&&!g.length)return{model:x,transactions:e.transactions,editorStates:e.editorStates};let{transactions:y}=e,C=new Map(e.editorStates),w=new Map,v=(0,p._6)();for(let t of h){let r=(0,d.DY)(x,t);r&&C.set(t,(0,i.l8)(r,v,e.files,e.owner,(0,u.os)(e)))}for(let e of f)C.delete(e),w.set(e,null);let b=new Set;for(let{node_id:e,new_node_value:t}of g)if(b.add(e),C.has(e)){let r=C.get(e);({transactions:y,editorStates:C}=(0,n.N)({transactions:y,editorStates:C},(0,a.rN)(r,t),e))}for(let t of(e.model.nodes!==x.nodes&&({editorStates:C,transactions:y}=(0,l.C)({editorStates:C,transactions:y},x.nodes)),m)){let e=(0,d.DY)(x,t);e&&({transactions:y,editorStates:C}=(0,n.N)({transactions:y,editorStates:C},{effects:c.g.of(e)},t))}return{model:x,editorStates:C,transactions:y,...(0,s.a)(e,w)}}},67064:function(e,t,r){r.d(t,{N:function(){return applyUpdate}});var i=r(78120);function applyUpdate(e,t,r){let{editorStates:n,transactions:o}=e,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r;(void 0===o||0===o.length)&&(o=[],n=new Map(n));let s=t instanceof i.YW?t:n.get(r).update(t);return n.set(l,s.state),o.push(s),{editorStates:n,transactions:o}}},49092:function(e,t,r){function modelHistoryCallback(e,t){"noop"!==e.type&&t.push(e)}function modelNodeCallback(e,t){let{inserts:r,removes:i,modes:n}=t;switch(e.type){case"insert_node":r.add(e.node_id),i.delete(e.node_id);break;case"remove_node":r.delete(e.node_id),n.delete(e.node_id),i.add(e.node_id);break;case"mode_node":n.add(e.node_id)}}r.d(t,{O:function(){return modelNodeCallback},v:function(){return modelHistoryCallback}})},49122:function(e,t,r){r.d(t,{C:function(){return updateNames},e:function(){return getNames}});var i=r(67064),n=r(85623),o=r(41312);function updateNames(e,t){let{editorStates:r,transactions:o}=e,l=getNames(t);for(let[e]of r)({transactions:o,editorStates:r}=(0,i.N)({transactions:o,editorStates:r},{effects:[n.Px.of(l)]},e));return{editorStates:r,transactions:o}}function getNames(e){return new Set(e.flatMap(o.WN))}},62029:function(e,t,r){r.d(t,{a:function(){return remap}});function remap(e,t){let{hoverId:r,focusStack:i,focusId:n,dragId:o,dropId:l,selectionFocusId:s,selection:a}=e,c={};for(let e of(i.some(e=>t.has(e))&&(c.focusStack=i.filter(e=>null!==t.get(e)).map(e=>{var r;return null!==(r=t.get(e))&&void 0!==r?r:e})),a))if(t.has(e)){let r=t.get(e);c.selection||(c.selection=new Set(a)),c.selection.delete(e),null!==r&&c.selection.add(r)}if(null!==r&&t.has(r)&&(c.hoverId=t.get(r)),null!==n&&t.has(n)&&(c.focusId=t.get(n)),null!==s&&t.has(s)&&(c.selectionFocusId=t.get(s)),null!==o&&t.has(o)&&(c.dragId=t.get(o)),null===c.dragId)c.dropId=void 0;else if(null!=l&&t.has(l)){let e=t.get(l);c.dropId=null===e?void 0:e}return c}},15864:function(e,t,r){r.d(t,{OJ:function(){return setInitialUserEditorSettings},_6:function(){return userEditorSettings},hS:function(){return updateUserEditorSettings}});var i=r(7595),n=r(32980),o=r(29020);let l={prettierOn:!1,closeBracketsOn:!1,fileUploadsOn:!1,loginToUpload:!1,spellcheckOn:!1,defaultCellMode:"js",vimKeys:!1};function setInitialUserEditorSettings(e,t){updateUserEditorSettings({prettierOn:(0,o.wW)(t,e.owner),closeBracketsOn:(0,o.CD)(t),fileUploadsOn:(0,n.Yb)(t)&&(0,i.j5)(t,e),loginToUpload:!t,spellcheckOn:(0,o.OA)(t),defaultCellMode:(0,o.Sx)(t),vimKeys:(0,o.S1)(t)})}function updateUserEditorSettings(e){l={...l,...e}}function userEditorSettings(){return l}}}]);